webpackJsonpCharts([4],{294:function(e,t,r){"use strict";e.exports=r(580)},328:function(e,t,r){"use strict";var n=r(363),a=r(356),i=r(345),o=r(0).removeElement,l=r(26),s=e.exports={};s.align=r(364),s.getCursor=r(365);var c=r(366);function d(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}function u(e){return n(e.changedTouches?e.changedTouches[0]:e,document.body)}s.unhover=c.wrapped,s.unhoverRaw=c.raw,s.init=function(e){var t,r,n,c,f,h,p,v,m=e.gd,g=1,x=m._context.doubleClickDelay,y=e.element;m._mouseDownTime||(m._mouseDownTime=0),y.style.pointerEvents="all",y.onmousedown=_,i?(y._ontouchstart&&y.removeEventListener("touchstart",y._ontouchstart),y._ontouchstart=_,y.addEventListener("touchstart",_,{passive:!1})):y.ontouchstart=_;var b=e.clampFn||function(e,t,r){return Math.abs(e)<r&&(e=0),Math.abs(t)<r&&(t=0),[e,t]};function _(i){m._dragged=!1,m._dragging=!0;var o=u(i);t=o[0],r=o[1],p=i.target,h=i,v=2===i.buttons||i.ctrlKey,void 0===i.clientX&&void 0===i.clientY&&(i.clientX=t,i.clientY=r),(n=(new Date).getTime())-m._mouseDownTime<x?g+=1:(g=1,m._mouseDownTime=n),e.prepFn&&e.prepFn(i,t,r),a&&!v?(f=d()).style.cursor=window.getComputedStyle(y).cursor:a||(f=document,c=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(y).cursor),document.addEventListener("mouseup",L),document.addEventListener("touchend",L),!1!==e.dragmode&&(i.preventDefault(),document.addEventListener("mousemove",T),document.addEventListener("touchmove",T,{passive:!1}))}function T(n){n.preventDefault();var a=u(n),i=e.minDrag||l.MINDRAG,o=b(a[0]-t,a[1]-r,i),c=o[0],d=o[1];(c||d)&&(m._dragged=!0,s.unhover(m)),m._dragged&&e.moveFn&&!v&&(m._dragdata={element:y,dx:c,dy:d},e.moveFn(c,d))}function L(t){if(delete m._dragdata,!1!==e.dragmode&&(t.preventDefault(),document.removeEventListener("mousemove",T),document.removeEventListener("touchmove",T)),document.removeEventListener("mouseup",L),document.removeEventListener("touchend",L),a?o(f):c&&(f.documentElement.style.cursor=c,c=null),m._dragging){if(m._dragging=!1,(new Date).getTime()-m._mouseDownTime>x&&(g=Math.max(g-1,1)),m._dragged)e.doneFn&&e.doneFn();else if(e.clickFn&&e.clickFn(g,h),!v){var r;try{r=new MouseEvent("click",t)}catch(e){var n=u(t);(r=document.createEvent("MouseEvents")).initMouseEvent("click",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,n[0],n[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}p.dispatchEvent(r)}m._dragging=!1,m._dragged=!1}else m._dragged=!1}},s.coverSlip=d},329:function(e,t,r){"use strict";var n=r(4),a=r(0),i=r(328),o=r(100),l=r(102),s=r(343);e.exports={moduleType:"component",name:"fx",constants:r(104),schema:{layout:l},attributes:r(106),layoutAttributes:l,supplyLayoutGlobalDefaults:r(370),supplyDefaults:r(371),supplyLayoutDefaults:r(372),calc:r(373),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:function(e,t,r){return a.castOption(e,t,"hoverlabel."+r)},castHoverinfo:function(e,t,r){return a.castOption(e,r,"hoverinfo",function(r){return a.coerceHoverinfo({hoverinfo:r},{_module:e._module},t)})},hover:s.hover,unhover:i.unhover,loneHover:s.loneHover,loneUnhover:function(e){var t=a.isD3Selection(e)?e:n.select(e);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:r(374)}},330:function(e,t,r){"use strict";e.exports=function(e,t){(e.attr("class")||"").split(" ").forEach(function(t){0===t.indexOf("cursor-")&&e.classed(t,!1)}),t&&e.classed("cursor-"+t,!0)}},331:function(e,t,r){"use strict";var n=r(352).EventEmitter,a={init:function(e){if(e._ev instanceof n)return e;var t=new n,r=new n;return e._ev=t,e._internalEv=r,e.on=t.on.bind(t),e.once=t.once.bind(t),e.removeListener=t.removeListener.bind(t),e.removeAllListeners=t.removeAllListeners.bind(t),e._internalOn=r.on.bind(r),e._internalOnce=r.once.bind(r),e._removeInternalListener=r.removeListener.bind(r),e._removeAllInternalListeners=r.removeAllListeners.bind(r),e.emit=function(n,a){"undefined"!=typeof jQuery&&jQuery(e).trigger(n,a),t.emit(n,a),r.emit(n,a)},e},triggerHandler:function(e,t,r){var n,a;"undefined"!=typeof jQuery&&(n=jQuery(e).triggerHandler(t,r));var i=e._ev;if(!i)return n;var o,l=i._events[t];if(!l)return n;function s(e){return e.listener?(i.removeListener(t,e.listener),e.fired?void 0:(e.fired=!0,e.listener.apply(i,[r]))):e.apply(i,[r])}for(l=Array.isArray(l)?l:[l],o=0;o<l.length-1;o++)s(l[o]);return a=s(l[o]),void 0!==n?n:a},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}};e.exports=a},332:function(e,t,r){"use strict";t.isGrouped=function(e){return-1!==(e.traceorder||"").indexOf("grouped")},t.isVertical=function(e){return"h"!==e.orientation},t.isReversed=function(e){return-1!==(e.traceorder||"").indexOf("reversed")}},333:function(e,t,r){"use strict";var n=r(0),a=r(14),i=r(100).isUnifiedHover;e.exports=function(e,t,r,o){function l(e){o.font[e]||(o.font[e]=t.legend?t.legend.font[e]:t.font[e])}o=o||{},t&&i(t.hovermode)&&(o.font||(o.font={}),l("size"),l("family"),l("color"),t.legend?(o.bgcolor||(o.bgcolor=a.combine(t.legend.bgcolor,t.paper_bgcolor)),o.bordercolor||(o.bordercolor=t.legend.bordercolor)):o.bgcolor||(o.bgcolor=t.paper_bgcolor)),r("hoverlabel.bgcolor",o.bgcolor),r("hoverlabel.bordercolor",o.bordercolor),r("hoverlabel.namelength",o.namelength),n.coerceFont(r,"hoverlabel.font",o.font),r("hoverlabel.align",o.align)}},337:function(e,t,r){"use strict";var n=r(0);function a(e){return-1!==e.indexOf("e")?e.replace(/[.]?0+e/,"e"):-1!==e.indexOf(".")?e.replace(/[.]?0+$/,""):e}t.formatPiePercent=function(e,t){var r=a((100*e).toPrecision(3));return n.numSeparate(r,t)+"%"},t.formatPieValue=function(e,t){var r=a(e.toPrecision(10));return n.numSeparate(r,t)},t.getFirstFilled=function(e,t){if(Array.isArray(e))for(var r=0;r<t.length;r++){var n=e[t[r]];if(n||0===n||""===n)return n}},t.castOption=function(e,r){return Array.isArray(e)?t.getFirstFilled(e,r):e||void 0},t.getRotationAngle=function(e){return("auto"===e?0:e)*Math.PI/180}},341:function(e,t,r){"use strict";var n=r(0),a=r(107),i=r(27).id2name,o=r(18),l=r(347),s=r(109),c=r(5).ALMOST_EQUAL,d=r(28).FROM_BL;function u(e,t,r){var a=r.axIds,l=r.layoutOut,s=r.hasImage,c=l._axisConstraintGroups,d=l._axisMatchGroups,u=t._id,v=u.charAt(0),m=((l._splomAxes||{})[v]||{})[u]||{},g=t._id,x="x"===g.charAt(0);function y(r,a){return n.coerce(e,t,o,r,a)}t._matchGroup=null,t._constraintGroup=null,y("constrain",s?"domain":"range"),n.coerce(e,t,{constraintoward:{valType:"enumerated",values:x?["left","center","right"]:["bottom","middle","top"],dflt:x?"center":"middle"}},"constraintoward");var b,_,T=t.type,L=[];for(b=0;b<a.length;b++){if((_=a[b])!==g)l[i(_)].type===T&&L.push(_)}var w=h(c,g);if(w){var k=[];for(b=0;b<L.length;b++)w[_=L[b]]||k.push(_);L=k}var M,A,O=L.length;O&&(e.matches||m.matches)&&(M=n.coerce(e,t,{matches:{valType:"enumerated",values:L,dflt:-1!==L.indexOf(m.matches)?m.matches:void 0}},"matches"));var H=s&&!x?t.anchor:void 0;if(O&&!M&&(e.scaleanchor||H)&&(A=n.coerce(e,t,{scaleanchor:{valType:"enumerated",values:L}},"scaleanchor",H)),M){t._matchGroup=p(d,g,M,1);var z=l[i(M)],E=f(l,t)/f(l,z);x!==("x"===M.charAt(0))&&(E=(x?"x":"y")+E),p(c,g,M,E)}else e.matches&&-1!==a.indexOf(e.matches)&&n.warn("ignored "+t._name+'.matches: "'+e.matches+'" to avoid an infinite loop');if(A){var P=y("scaleratio");P||(P=t.scaleratio=1),p(c,g,A,P)}else e.scaleanchor&&-1!==a.indexOf(e.scaleanchor)&&n.warn("ignored "+t._name+'.scaleanchor: "'+e.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function f(e,t){var r=t.domain;return r||(r=e[i(t.overlaying)].domain),r[1]-r[0]}function h(e,t){for(var r=0;r<e.length;r++)if(e[r][t])return e[r];return null}function p(e,t,r,n){var a,i,o,l,s,c=h(e,t);null===c?((c={})[t]=1,s=e.length,e.push(c)):s=e.indexOf(c);var d=Object.keys(c);for(a=0;a<e.length;a++)if(o=e[a],a!==s&&o[r]){var u=o[r];for(i=0;i<d.length;i++)o[l=d[i]]=v(u,v(n,c[l]));return void e.splice(s,1)}if(1!==n)for(i=0;i<d.length;i++){var f=d[i];c[f]=v(n,c[f])}c[r]=1}function v(e,t){var r,n,a="",i="";"string"==typeof e&&(r=(a=e.match(/^[xy]*/)[0]).length,e=+e.substr(r)),"string"==typeof t&&(n=(i=t.match(/^[xy]*/)[0]).length,t=+t.substr(n));var o=e*t;return r||n?r&&n&&a.charAt(0)!==i.charAt(0)?r===n?o:(r>n?a.substr(n):i.substr(r))+o:a+i+e*t:o}function m(e,t){for(var r=t._size,n=r.h/r.w,a={},i=Object.keys(e),o=0;o<i.length;o++){var l=i[o],s=e[l];if("string"==typeof s){var c=s.match(/^[xy]*/)[0],d=c.length;s=+s.substr(d);for(var u="y"===c.charAt(0)?n:1/n,f=0;f<d;f++)s*=u}a[l]=s}return a}function g(e,t){var r=e._inputDomain,n=d[e.constraintoward],a=r[0]+(r[1]-r[0])*n;e.domain=e._input.domain=[a+(r[0]-a)/t,a+(r[1]-a)/t],e.setScale()}t.handleDefaults=function(e,t,r){var a,o,l,c,d,f,h,p,v=r.axIds,m=r.axHasImage,g=t._axisConstraintGroups=[],x=t._axisMatchGroups=[];for(a=0;a<v.length;a++)u(d=e[c=i(v[a])],f=t[c],{axIds:v,layoutOut:t,hasImage:m[c]});function y(e,r){for(a=0;a<e.length;a++)for(l in o=e[a])t[i(l)][r]=o}for(y(x,"_matchGroup"),a=0;a<g.length;a++)for(l in o=g[a])if((f=t[i(l)]).fixedrange){for(var b in o){var _=i(b);!1===(e[_]||{}).fixedrange&&n.warn("fixedrange was specified as false for axis "+_+" but was overridden because another axis in its constraint group has fixedrange true"),t[_].fixedrange=!0}break}for(a=0;a<g.length;){for(l in o=g[a]){(f=t[i(l)])._matchGroup&&Object.keys(f._matchGroup).length===Object.keys(o).length&&(g.splice(a,1),a--);break}a++}y(g,"_constraintGroup");var T=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],L=!1,w=!1;function k(){p=f[h],"rangebreaks"===h&&(w=f._hasDayOfWeekBreaks)}for(a=0;a<x.length;a++){o=x[a];for(var M=0;M<T.length;M++){var A;for(l in h=T[M],p=null,o)if(d=e[c=i(l)],f=t[c],h in f){if(!f.matches&&(A=f,h in d)){k();break}null===p&&h in d&&k()}if("range"===h&&p&&(L=!0),"autorange"===h&&null===p&&L&&(p=!1),null===p&&h in A&&(p=A[h]),null!==p)for(l in o)(f=t[i(l)])[h]="range"===h?p.slice():p,"rangebreaks"===h&&(f._hasDayOfWeekBreaks=w,s(f,t))}}},t.enforce=function(e){var t,r,n,o,s,d,u,f,h=e._fullLayout,p=h._axisConstraintGroups||[];for(t=0;t<p.length;t++){n=m(p[t],h);var v=Object.keys(n),x=1/0,y=0,b=1/0,_={},T={},L=!1;for(r=0;r<v.length;r++)T[o=v[r]]=s=h[i(o)],s._inputDomain?s.domain=s._inputDomain.slice():s._inputDomain=s.domain.slice(),s._inputRange||(s._inputRange=s.range.slice()),s.setScale(),_[o]=d=Math.abs(s._m)/n[o],x=Math.min(x,d),"domain"!==s.constrain&&s._constraintShrinkable||(b=Math.min(b,d)),delete s._constraintShrinkable,y=Math.max(y,d),"domain"===s.constrain&&(L=!0);if(!(x>c*y)||L)for(r=0;r<v.length;r++)if(d=_[o=v[r]],u=(s=T[o]).constrain,d!==b||"domain"===u)if(f=d/b,"range"===u)l(s,f);else{var w=s._inputDomain,k=(s.domain[1]-s.domain[0])/(w[1]-w[0]),M=(s.r2l(s.range[1])-s.r2l(s.range[0]))/(s.r2l(s._inputRange[1])-s.r2l(s._inputRange[0]));if((f/=k)*M<1){s.domain=s._input.domain=w.slice(),l(s,f);continue}if(M<1&&(s.range=s._input.range=s._inputRange.slice(),f*=M),s.autorange){var A=s.r2l(s.range[0]),O=s.r2l(s.range[1]),H=(A+O)/2,z=H,E=H,P=Math.abs(O-H),S=H-P*f*1.0001,D=H+P*f*1.0001,C=a.makePadFn(h,s,0),I=a.makePadFn(h,s,1);g(s,f);var V,F,R=Math.abs(s._m),B=a.concatExtremes(e,s),G=B.min,Z=B.max;for(F=0;F<G.length;F++)(V=G[F].val-C(G[F])/R)>S&&V<z&&(z=V);for(F=0;F<Z.length;F++)(V=Z[F].val+I(Z[F])/R)<D&&V>E&&(E=V);f/=(E-z)/(2*P),z=s.l2r(z),E=s.l2r(E),s.range=s._input.range=A<O?[z,E]:[E,z]}g(s,f)}}},t.getAxisGroup=function(e,t){for(var r=e._axisMatchGroups,n=0;n<r.length;n++){if(r[n][t])return"g"+n}return t},t.clean=function(e,t){if(t._inputDomain){for(var r=!1,n=t._id,a=e._fullLayout._axisConstraintGroups,i=0;i<a.length;i++)if(a[i][n]){r=!0;break}r&&"domain"===t.constrain||(t._input.domain=t.domain=t._inputDomain,delete t._inputDomain)}}},342:function(e,t){e.exports=!0},343:function(e,t,r){"use strict";var n=r(4),a=r(1),i=r(19),o=r(0),l=o.strTranslate,s=o.strRotate,c=r(331),d=r(39),u=r(367),f=r(38),h=r(14),p=r(328),v=r(99),m=r(3),g=r(100),x=r(104),y=r(357),b=r(359),_=x.YANGLE,T=Math.PI*_/180,L=1/Math.sin(T),w=Math.cos(T),k=Math.sin(T),M=x.HOVERARROWSIZE,A=x.HOVERTEXTPAD;function O(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa,e.ya||""].join(",")}t.hover=function(e,t,r,i){e=o.getGraphDiv(e),o.throttle(e._fullLayout._uid+x.HOVERID,x.HOVERMINTIME,function(){!function(e,t,r,i){r||(r="xy");var l=Array.isArray(r)?r:[r],s=e._fullLayout,d=s._plots||[],f=d[r],v=s._has("cartesian");if(f){var x=f.overlays.map(function(e){return e.id});l=l.concat(x)}for(var y=l.length,b=new Array(y),_=new Array(y),T=!1,w=0;w<y;w++){var k=l[w];if(d[k])T=!0,b[w]=d[k].xaxis,_[w]=d[k].yaxis;else{if(!s[k]||!s[k]._subplot)return void o.warn("Unrecognized subplot: "+k);var M=s[k]._subplot;b[w]=M.xaxis,_[w]=M.yaxis}}var A=t.hovermode||s.hovermode;A&&!T&&(A="closest");if(-1===["x","y","closest","x unified","y unified"].indexOf(A)||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return p.unhoverRaw(e,t);var H,E,I,V,F,R,B,G,Z,Y,N,X,U,j=-1===s.hoverdistance?1/0:s.hoverdistance,W=-1===s.spikedistance?1/0:s.spikedistance,K=[],q=[],Q={hLinePoint:null,vLinePoint:null},J=!1;if(Array.isArray(t))for(A="array",I=0;I<t.length;I++)(F=e.calcdata[t[I].curveNumber||0])&&(R=F[0].trace,"skip"!==F[0].trace.hoverinfo&&(q.push(F),"h"===R.orientation&&(J=!0)));else{for(V=0;V<e.calcdata.length;V++)F=e.calcdata[V],"skip"!==(R=F[0].trace).hoverinfo&&g.isTraceInSubplots(R,l)&&(q.push(F),"h"===R.orientation&&(J=!0));var $,ee,te=!t.target;if(te)$="xpx"in t?t.xpx:b[0]._length/2,ee="ypx"in t?t.ypx:_[0]._length/2;else{if(!1===c.triggerHandler(e,"plotly_beforehover",t))return;var re=t.target.getBoundingClientRect();$=t.clientX-re.left,ee=t.clientY-re.top,s._calcInverseTransform(e);var ne=o.apply3DTransform(s._invTransform)($,ee);if($=ne[0],ee=ne[1],$<0||$>b[0]._length||ee<0||ee>_[0]._length)return p.unhoverRaw(e,t)}if(t.pointerX=$+b[0]._offset,t.pointerY=ee+_[0]._offset,H="xval"in t?g.flat(l,t.xval):g.p2c(b,$),E="yval"in t?g.flat(l,t.yval):g.p2c(_,ee),!a(H[0])||!a(E[0]))return o.warn("Fx.hover failed",t,e),p.unhoverRaw(e,t)}var ae=1/0;function ie(e,r){for(V=0;V<q.length;V++)if((F=q[V])&&F[0]&&F[0].trace&&!0===(R=F[0].trace).visible&&0!==R._length&&-1===["carpet","contourcarpet"].indexOf(R._module.name)){if("splom"===R.type?B=l[G=0]:(B=g.getSubplot(R),G=l.indexOf(B)),Z=A,g.isUnifiedHover(Z)&&(Z=Z.charAt(0)),X={cd:F,trace:R,xa:b[G],ya:_[G],maxHoverDistance:j,maxSpikeDistance:W,index:!1,distance:Math.min(ae,j),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:h.defaultLine,name:R.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},s[B]&&(X.subplot=s[B]._subplot),s._splomScenes&&s._splomScenes[R.uid]&&(X.scene=s._splomScenes[R.uid]),U=K.length,"array"===Z){var n=t[V];"pointNumber"in n?(X.index=n.pointNumber,Z="closest"):(Z="","xval"in n&&(Y=n.xval,Z="x"),"yval"in n&&(N=n.yval,Z=Z?"closest":"y"))}else void 0!==e&&void 0!==r?(Y=e,N=r):(Y=H[G],N=E[G]);if(0!==j)if(R._module&&R._module.hoverPoints){var i=R._module.hoverPoints(X,Y,N,Z,s._hoverlayer);if(i)for(var c,d=0;d<i.length;d++)c=i[d],a(c.x0)&&a(c.y0)&&K.push(S(c,A))}else o.log("Unrecognized trace type in hover:",R);if("closest"===A&&K.length>U&&(K.splice(0,U),ae=K[0].distance),v&&0!==W&&0===K.length){X.distance=W,X.index=!1;var u=R._module.hoverPoints(X,Y,N,"closest",s._hoverlayer);if(u&&(u=u.filter(function(e){return e.spikeDistance<=W})),u&&u.length){var f,p=u.filter(function(e){return e.xa.showspikes&&"hovered data"!==e.xa.spikesnap});if(p.length){var m=p[0];a(m.x0)&&a(m.y0)&&(f=le(m),(!Q.vLinePoint||Q.vLinePoint.spikeDistance>f.spikeDistance)&&(Q.vLinePoint=f))}var x=u.filter(function(e){return e.ya.showspikes&&"hovered data"!==e.ya.spikesnap});if(x.length){var y=x[0];a(y.x0)&&a(y.y0)&&(f=le(y),(!Q.hLinePoint||Q.hLinePoint.spikeDistance>f.spikeDistance)&&(Q.hLinePoint=f))}}}}}function oe(e,t){for(var r,n=null,a=1/0,i=0;i<e.length;i++)(r=e[i].spikeDistance)<=a&&r<=t&&(n=e[i],a=r);return n}function le(e){return e?{xa:e.xa,ya:e.ya,x:void 0!==e.xSpike?e.xSpike:(e.x0+e.x1)/2,y:void 0!==e.ySpike?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}:null}ie();var se={fullLayout:s,container:s._hoverlayer,outerContainer:s._paperdiv,event:t},ce=e._spikepoints,de={vLinePoint:Q.vLinePoint,hLinePoint:Q.hLinePoint};if(e._spikepoints=de,v&&0!==W&&0!==K.length){var ue=K.filter(function(e){return e.ya.showspikes}),fe=oe(ue,W);Q.hLinePoint=le(fe);var he=K.filter(function(e){return e.xa.showspikes}),pe=oe(he,W);Q.vLinePoint=le(pe)}if(0===K.length){var ve=p.unhoverRaw(e,t);return!v||null===Q.hLinePoint&&null===Q.vLinePoint||C(ce)&&D(e,Q,se),ve}v&&C(ce)&&D(e,Q,se);if(K.sort(function(e,t){return e.distance-t.distance}),g.isXYhover(Z)&&0!==K[0].length&&"splom"!==K[0].trace.type){var me=K[0],ge=me.cd[me.index],xe="group"===s.boxmode||"group"===s.violinmode,ye=me.xVal,be=me.xa;"category"===be.type&&(ye=be._categoriesMap[ye]),"date"===be.type&&(ye=be.d2c(ye)),ge&&ge.t&&ge.t.posLetter===be._id&&xe&&(ye+=ge.t.dPos);var _e=me.yVal;"category"===(be=me.ya).type&&(_e=be._categoriesMap[_e]),"date"===be.type&&(_e=be.d2c(_e)),ge&&ge.t&&ge.t.posLetter===be._id&&xe&&(_e+=ge.t.dPos),ie(ye,_e);var Te={};K=K.filter(function(e){var t=O(e);if(!Te[t])return Te[t]=!0,Te[t]})}var Le=e._hoverdata,we=[];for(I=0;I<K.length;I++){var ke=K[I],Me=g.makeEventData(ke,ke.trace,ke.cd);if(!1!==ke.hovertemplate){var Ae=!1;ke.cd[ke.index]&&ke.cd[ke.index].ht&&(Ae=ke.cd[ke.index].ht),ke.hovertemplate=Ae||ke.trace.hovertemplate||!1}ke.eventData=[Me],we.push(Me)}e._hoverdata=we;var Oe="y"===A&&(q.length>1||K.length>1)||"closest"===A&&J&&K.length>1,He=h.combine(s.plot_bgcolor||h.background,s.paper_bgcolor),ze={hovermode:A,rotateLabels:Oe,bgColor:He,container:s._hoverlayer,outerContainer:s._paperdiv,commonLabelOpts:s.hoverlabel,hoverdistance:s.hoverdistance},Ee=z(K,ze,e);g.isUnifiedHover(A)||(!function(e,t,r){var n,a,i,o,l,s,c,d=0,u=1,f=e.size(),h=new Array(f),p=0;function v(e){var t=e[0],r=e[e.length-1];if(a=t.pmin-t.pos-t.dp+t.size,i=r.pos+r.dp+r.size-t.pmax,a>.01){for(l=e.length-1;l>=0;l--)e[l].dp+=a;n=!1}if(!(i<.01)){if(a<-.01){for(l=e.length-1;l>=0;l--)e[l].dp-=i;n=!1}if(n){var c=0;for(o=0;o<e.length;o++)(s=e[o]).pos+s.dp+s.size>t.pmax&&c++;for(o=e.length-1;o>=0&&!(c<=0);o--)(s=e[o]).pos>t.pmax-1&&(s.del=!0,c--);for(o=0;o<e.length&&!(c<=0);o++)if((s=e[o]).pos<t.pmin+1)for(s.del=!0,c--,i=2*s.size,l=e.length-1;l>=0;l--)e[l].dp-=i;for(o=e.length-1;o>=0&&!(c<=0);o--)(s=e[o]).pos+s.dp+s.size>t.pmax&&(s.del=!0,c--)}}}e.each(function(e){var n=e[t],a="x"===n._id.charAt(0),i=n.range;0===p&&i&&i[0]>i[1]!==a&&(u=-1),h[p++]=[{datum:e,traceIndex:e.trace.index,dp:0,pos:e.pos,posref:e.posref,size:e.by*(a?L:1)/2,pmin:0,pmax:a?r.width:r.height}]}),h.sort(function(e,t){return e[0].posref-t[0].posref||u*(t[0].traceIndex-e[0].traceIndex)});for(;!n&&d<=f;){for(d++,n=!0,o=0;o<h.length-1;){var m=h[o],g=h[o+1],x=m[m.length-1],y=g[0];if((a=x.pos+x.dp+x.size-y.pos-y.dp+y.size)>.01&&x.pmin===y.pmin&&x.pmax===y.pmax){for(l=g.length-1;l>=0;l--)g[l].dp+=a;for(m.push.apply(m,g),h.splice(o+1,1),c=0,l=m.length-1;l>=0;l--)c+=m[l].dp;for(i=c/m.length,l=m.length-1;l>=0;l--)m[l].dp-=i;n=!1}else o++}h.forEach(v)}for(o=h.length-1;o>=0;o--){var b=h[o];for(l=b.length-1;l>=0;l--){var _=b[l],T=_.datum;T.offset=_.dp,T.del=_.del}}}(Ee,Oe?"xa":"ya",s),P(Ee,Oe,s._invScaleX,s._invScaleY));if(t.target&&t.target.tagName){var Pe=m.getComponentMethod("annotations","hasClickToShow")(e,we);u(n.select(t.target),Pe?"pointer":"")}if(!t.target||i||!function(e,t,r){if(!r||r.length!==e._hoverdata.length)return!0;for(var n=r.length-1;n>=0;n--){var a=r[n],i=e._hoverdata[n];if(a.curveNumber!==i.curveNumber||String(a.pointNumber)!==String(i.pointNumber)||String(a.pointNumbers)!==String(i.pointNumbers))return!0}return!1}(e,0,Le))return;Le&&e.emit("plotly_unhover",{event:t,points:Le});e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:b,yaxes:_,xvals:H,yvals:E})}(e,t,r,i)})},t.loneHover=function(e,t){var r=!0;Array.isArray(e)||(r=!1,e=[e]);var a=e.map(function(e){return{color:e.color||h.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,nameLength:e.nameLength,textAlign:e.textAlign,trace:e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:e.hovertemplate||!1,eventData:e.eventData||!1,hovertemplateLabels:e.hovertemplateLabels||!1}}),i=n.select(t.container),o=t.outerContainer?n.select(t.outerContainer):i,l={hovermode:"closest",rotateLabels:!1,bgColor:t.bgColor||h.background,container:i,outerContainer:o},s=z(a,l,t.gd),c=0,d=0;s.sort(function(e,t){return e.y0-t.y0}).each(function(e,r){var n=e.y0-e.by/2;e.offset=n-5<c?c-n+5:0,c=n+e.by+e.offset,r===t.anchorIndex&&(d=e.offset)}).each(function(e){e.offset-=d});var u=t.gd._fullLayout._invScaleX,f=t.gd._fullLayout._invScaleY;return P(s,l.rotateLabels,u,f),r?s:s.node()};var H=/<extra>([\s\S]*)<\/extra>/;function z(e,t,r){var a=r._fullLayout,i=t.hovermode,c=t.rotateLabels,u=t.bgColor,p=t.container,v=t.outerContainer,m=t.commonLabelOpts||{},T=t.fontFamily||x.HOVERFONT,L=t.fontSize||x.HOVERFONTSIZE,w=e[0],k=w.xa,H=w.ya,z="y"===i.charAt(0)?"yLabel":"xLabel",P=w[z],S=(String(P)||"").split(" ")[0],D=v.node().getBoundingClientRect(),C=D.top,I=D.width,V=D.height,F=void 0!==P&&w.distance<=t.hoverdistance&&("x"===i||"y"===i);if(F){var R,B,G=!0;for(R=0;R<e.length;R++)if(G&&void 0===e[R].zLabel&&(G=!1),B=e[R].hoverinfo||e[R].trace.hoverinfo){var Z=Array.isArray(B)?B:B.split("+");if(-1===Z.indexOf("all")&&-1===Z.indexOf(i)){F=!1;break}}G&&(F=!1)}var Y=p.selectAll("g.axistext").data(F?[0]:[]);function N(e){return e.filter(function(e){return void 0!==e.zLabelVal||(e[z]||"").split(" ")[0]===S})}if(Y.enter().append("g").classed("axistext",!0),Y.exit().remove(),Y.each(function(){var t=n.select(this),s=o.ensureSingle(t,"path","",function(e){e.style({"stroke-width":"1px"})}),c=o.ensureSingle(t,"text","",function(e){e.attr("data-notex",1)}),u=m.bgcolor||h.defaultLine,p=m.bordercolor||h.contrast(u),v=h.contrast(u),g={family:m.font.family||T,size:m.font.size||L,color:m.font.color||v};s.style({fill:u,stroke:p}),c.text(P).call(f.font,g).call(d.positionText,0,0).call(d.convertToTspans,r),t.attr("transform","");var x,y,b=c.node().getBoundingClientRect();if("x"===i){var _="top"===k.side?"-":"";c.attr("text-anchor","middle").call(d.positionText,0,"top"===k.side?C-b.bottom-M-A:C-b.top+M+A),x=k._offset+(w.x0+w.x1)/2,y=H._offset+("top"===k.side?0:H._length);var O=b.width/2+A;x<O?(x=O,s.attr("d","M-"+(O-M)+",0L-"+(O-2*M)+","+_+M+"H"+(A+b.width/2)+"v"+_+(2*A+b.height)+"H-"+O+"V"+_+M+"Z")):x>a.width-O?(x=a.width-O,s.attr("d","M"+(O-M)+",0L"+O+","+_+M+"v"+_+(2*A+b.height)+"H-"+O+"V"+_+M+"H"+(O-2*M)+"Z")):s.attr("d","M0,0L"+M+","+_+M+"H"+(A+b.width/2)+"v"+_+(2*A+b.height)+"H-"+(A+b.width/2)+"V"+_+M+"H-"+M+"Z")}else{var z,E,S;"right"===H.side?(z="start",E=1,S="",x=k._offset+k._length):(z="end",E=-1,S="-",x=k._offset),y=H._offset+(w.y0+w.y1)/2,c.attr("text-anchor",z),s.attr("d","M0,0L"+S+M+","+M+"V"+(A+b.height/2)+"h"+S+(2*A+b.width)+"V-"+(A+b.height/2)+"H"+S+M+"V-"+M+"Z");var D,I=b.height/2,V=C-b.top-I,F="clip"+a._uid+"commonlabel"+H._id;if(x<b.width+2*A+M){D="M-"+(M+A)+"-"+I+"h-"+(b.width-A)+"V"+I+"h"+(b.width-A)+"Z";var R=b.width-x+A;d.positionText(c,R,V),"end"===z&&c.selectAll("tspan").each(function(){var e=n.select(this),t=f.tester.append("text").text(e.text()).call(f.font,g),r=t.node().getBoundingClientRect();Math.round(r.width)<Math.round(b.width)&&e.attr("x",R-r.width),t.remove()})}else d.positionText(c,E*(A+M),V),D=null;var B=a._topclips.selectAll("#"+F).data(D?[0]:[]);B.enter().append("clipPath").attr("id",F).append("path"),B.exit().remove(),B.select("path").attr("d",D),f.setClipUrl(c,D?F:null,r)}t.attr("transform",l(x,y)),e=N(e)}),g.isUnifiedHover(i)){if(p.selectAll("g.hovertext").remove(),void 0!==P&&w.distance<=t.hoverdistance&&(e=N(e)),0===e.length)return;var X={showlegend:!0,legend:{title:{text:P,font:a.hoverlabel.font},font:a.hoverlabel.font,bgcolor:a.hoverlabel.bgcolor,bordercolor:a.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:a.legend?a.legend.traceorder:void 0,orientation:"v"}},U={};y(X,U,r._fullData);var j=U.legend;j.entries=[];for(var W=0;W<e.length;W++){var K=E(e[W],!0,i,a,P),q=K[0],Q=K[1],J=e[W];J.name=Q,J.text=""!==Q?Q+" : "+q:q;var $=J.cd[J.index];$&&($.mc&&(J.mc=$.mc),$.mcc&&(J.mc=$.mcc),$.mlc&&(J.mlc=$.mlc),$.mlcc&&(J.mlc=$.mlcc),$.mlw&&(J.mlw=$.mlw),$.mrc&&(J.mrc=$.mrc),$.dir&&(J.dir=$.dir)),J._distinct=!0,j.entries.push([J])}j.entries.sort(function(e,t){return e[0].trace.index-t[0].trace.index}),j.layer=p,b(r,j);var ee=o.mean(e.map(function(e){return(e.y0+e.y1)/2})),te=o.mean(e.map(function(e){return(e.x0+e.x1)/2})),re=p.select("g.legend"),ne=re.node().getBoundingClientRect();te+=k._offset,ee+=H._offset-ne.height/2;var ae=ne.width+2*A;!(te+ae<=I)&&te-ae>=0?te-=ae:te+=2*A;var ie=ne.height+2*A,oe=ee+ie>=V;return ie<=V&&(ee<=C?ee=H._offset+2*A:oe&&(ee=V-ie)),re.attr("transform",l(te,ee)),re}var le=p.selectAll("g.hovertext").data(e,function(e){return O(e)});return le.enter().append("g").classed("hovertext",!0).each(function(){var e=n.select(this);e.append("rect").call(h.fill,h.addOpacity(u,.8)),e.append("text").classed("name",!0),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(f.font,T,L)}),le.exit().remove(),le.each(function(e){var t=n.select(this).attr("transform",""),o=e.color;Array.isArray(o)&&(o=o[e.eventData[0].pointNumber]);var p=e.bgcolor||o,v=h.combine(h.opacity(p)?p:h.defaultLine,u),m=h.combine(h.opacity(o)?o:h.defaultLine,u),g=e.borderColor||h.contrast(v),x=E(e,F,i,a,P,t),y=x[0],b=x[1],w=t.select("text.nums").call(f.font,e.fontFamily||T,e.fontSize||L,e.fontColor||g).text(y).attr("data-notex",1).call(d.positionText,0,0).call(d.convertToTspans,r),k=t.select("text.name"),O=0,H=0;if(b&&b!==y){k.call(f.font,e.fontFamily||T,e.fontSize||L,m).text(b).attr("data-notex",1).call(d.positionText,0,0).call(d.convertToTspans,r);var z=k.node().getBoundingClientRect();O=z.width+2*A,H=z.height+2*A}else k.remove(),t.select("rect").remove();t.select("path").style({fill:v,stroke:g});var S,D,R=w.node().getBoundingClientRect(),B=e.xa._offset+(e.x0+e.x1)/2,G=e.ya._offset+(e.y0+e.y1)/2,Z=Math.abs(e.x1-e.x0),Y=Math.abs(e.y1-e.y0),N=R.width+M+A+O;if(e.ty0=C-R.top,e.bx=R.width+2*A,e.by=Math.max(R.height+2*A,H),e.anchor="start",e.txwidth=R.width,e.tx2width=O,e.offset=0,c)e.pos=B,S=G+Y/2+N<=V,D=G-Y/2-N>=0,"top"!==e.idealAlign&&S||!D?S?(G+=Y/2,e.anchor="start"):e.anchor="middle":(G-=Y/2,e.anchor="end");else if(e.pos=G,S=B+Z/2+N<=I,D=B-Z/2-N>=0,"left"!==e.idealAlign&&S||!D)if(S)B+=Z/2,e.anchor="start";else{e.anchor="middle";var X=N/2,U=B+X-I,j=B-X;U>0&&(B-=U),j<0&&(B+=-j)}else B-=Z/2,e.anchor="end";w.attr("text-anchor",e.anchor),O&&k.attr("text-anchor",e.anchor),t.attr("transform",l(B,G)+(c?s(_):""))}),le}function E(e,t,r,n,a,i){var l="",s="";void 0!==e.nameOverride&&(e.name=e.nameOverride),e.name&&(e.trace._meta&&(e.name=o.templateString(e.name,e.trace._meta)),l=I(e.name,e.nameLength)),void 0!==e.zLabel?(void 0!==e.xLabel&&(s+="x: "+e.xLabel+"<br>"),void 0!==e.yLabel&&(s+="y: "+e.yLabel+"<br>"),"choropleth"!==e.trace.type&&"choroplethmapbox"!==e.trace.type&&(s+=(s?"z: ":"")+e.zLabel)):t&&e[r.charAt(0)+"Label"]===a?s=e[("x"===r.charAt(0)?"y":"x")+"Label"]||"":void 0===e.xLabel?void 0!==e.yLabel&&"scattercarpet"!==e.trace.type&&(s=e.yLabel):s=void 0===e.yLabel?e.xLabel:"("+e.xLabel+", "+e.yLabel+")",!e.text&&0!==e.text||Array.isArray(e.text)||(s+=(s?"<br>":"")+e.text),void 0!==e.extraText&&(s+=(s?"<br>":"")+e.extraText),i&&""===s&&!e.hovertemplate&&(""===l&&i.remove(),s=l);var c=n._d3locale,d=e.hovertemplate||!1,u=e.hovertemplateLabels||e,f=e.eventData[0]||{};return d&&(s=(s=o.hovertemplateString(d,u,c,f,e.trace._meta)).replace(H,function(t,r){return l=I(r,e.nameLength),""})),[s,l]}function P(e,t,r,a){var i=function(e){return e*r},o=function(e){return e*a};e.each(function(e){var r=n.select(this);if(e.del)return r.remove();var a=r.select("text.nums"),l=e.anchor,s="end"===l?-1:1,c={start:1,end:-1,middle:0}[l],u=c*(M+A),h=u+c*(e.txwidth+A),p=0,v=e.offset,m="middle"===l;m&&(u-=e.tx2width/2,h+=e.txwidth/2+A),t&&(v*=-k,p=e.offset*w),r.select("path").attr("d",m?"M-"+i(e.bx/2+e.tx2width/2)+","+o(v-e.by/2)+"h"+i(e.bx)+"v"+o(e.by)+"h-"+i(e.bx)+"Z":"M0,0L"+i(s*M+p)+","+o(M+v)+"v"+o(e.by/2-M)+"h"+i(s*e.bx)+"v-"+o(e.by)+"H"+i(s*M+p)+"V"+o(v-M)+"Z");var g=p+u,x=v+e.ty0-e.by/2+A,y=e.textAlign||"auto";"auto"!==y&&("left"===y&&"start"!==l?(a.attr("text-anchor","start"),g=m?-e.bx/2-e.tx2width/2+A:-e.bx-A):"right"===y&&"end"!==l&&(a.attr("text-anchor","end"),g=m?e.bx/2-e.tx2width/2-A:e.bx+A)),a.call(d.positionText,i(g),o(x)),e.tx2width&&(r.select("text.name").call(d.positionText,i(h+c*A+p),o(v+e.ty0-e.by/2+A)),r.select("rect").call(f.setRect,i(h+(c-1)*e.tx2width/2+p),o(v-e.by/2-1),i(e.tx2width),o(e.by+2)))})}function S(e,t){var r=e.index,n=e.trace||{},i=e.cd[0],l=e.cd[r]||{};function s(e){return e||a(e)&&0===e}var c=Array.isArray(r)?function(e,t){var a=o.castOption(i,r,e);return s(a)?a:o.extractOption({},n,"",t)}:function(e,t){return o.extractOption(l,n,e,t)};function d(t,r,n){var a=c(r,n);s(a)&&(e[t]=a)}if(d("hoverinfo","hi","hoverinfo"),d("bgcolor","hbg","hoverlabel.bgcolor"),d("borderColor","hbc","hoverlabel.bordercolor"),d("fontFamily","htf","hoverlabel.font.family"),d("fontSize","hts","hoverlabel.font.size"),d("fontColor","htc","hoverlabel.font.color"),d("nameLength","hnl","hoverlabel.namelength"),d("textAlign","hta","hoverlabel.align"),e.posref="y"===t||"closest"===t&&"h"===n.orientation?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2,e.x0=o.constrain(e.x0,0,e.xa._length),e.x1=o.constrain(e.x1,0,e.xa._length),e.y0=o.constrain(e.y0,0,e.ya._length),e.y1=o.constrain(e.y1,0,e.ya._length),void 0!==e.xLabelVal&&(e.xLabel="xLabel"in e?e.xLabel:v.hoverLabelText(e.xa,e.xLabelVal),e.xVal=e.xa.c2d(e.xLabelVal)),void 0!==e.yLabelVal&&(e.yLabel="yLabel"in e?e.yLabel:v.hoverLabelText(e.ya,e.yLabelVal),e.yVal=e.ya.c2d(e.yLabelVal)),void 0!==e.zLabelVal&&void 0===e.zLabel&&(e.zLabel=String(e.zLabelVal)),!(isNaN(e.xerr)||"log"===e.xa.type&&e.xerr<=0)){var u=v.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;void 0!==e.xerrneg?e.xLabel+=" +"+u+" / -"+v.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+=" ± "+u,"x"===t&&(e.distance+=1)}if(!(isNaN(e.yerr)||"log"===e.ya.type&&e.yerr<=0)){var f=v.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;void 0!==e.yerrneg?e.yLabel+=" +"+f+" / -"+v.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+=" ± "+f,"y"===t&&(e.distance+=1)}var h=e.hoverinfo||e.trace.hoverinfo;return h&&"all"!==h&&(-1===(h=Array.isArray(h)?h:h.split("+")).indexOf("x")&&(e.xLabel=void 0),-1===h.indexOf("y")&&(e.yLabel=void 0),-1===h.indexOf("z")&&(e.zLabel=void 0),-1===h.indexOf("text")&&(e.text=void 0),-1===h.indexOf("name")&&(e.name=void 0)),e}function D(e,t,r){var n,a,o=r.container,l=r.fullLayout,s=l._size,c=r.event,d=!!t.hLinePoint,u=!!t.vLinePoint;if(o.selectAll(".spikeline").remove(),u||d){var p=h.combine(l.plot_bgcolor,l.paper_bgcolor);if(d){var m,g,x=t.hLinePoint;n=x&&x.xa,"cursor"===(a=x&&x.ya).spikesnap?(m=c.pointerX,g=c.pointerY):(m=n._offset+x.x,g=a._offset+x.y);var y,b,_=i.readability(x.color,p)<1.5?h.contrast(p):x.color,T=a.spikemode,L=a.spikethickness,w=a.spikecolor||_,k=v.getPxPosition(e,a);if(-1!==T.indexOf("toaxis")||-1!==T.indexOf("across")){if(-1!==T.indexOf("toaxis")&&(y=k,b=m),-1!==T.indexOf("across")){var M=a._counterDomainMin,A=a._counterDomainMax;"free"===a.anchor&&(M=Math.min(M,a.position),A=Math.max(A,a.position)),y=s.l+M*s.w,b=s.l+A*s.w}o.insert("line",":first-child").attr({x1:y,x2:b,y1:g,y2:g,"stroke-width":L,stroke:w,"stroke-dasharray":f.dashStyle(a.spikedash,L)}).classed("spikeline",!0).classed("crisp",!0),o.insert("line",":first-child").attr({x1:y,x2:b,y1:g,y2:g,"stroke-width":L+2,stroke:p}).classed("spikeline",!0).classed("crisp",!0)}-1!==T.indexOf("marker")&&o.insert("circle",":first-child").attr({cx:k+("right"!==a.side?L:-L),cy:g,r:L,fill:w}).classed("spikeline",!0)}if(u){var O,H,z=t.vLinePoint;n=z&&z.xa,a=z&&z.ya,"cursor"===n.spikesnap?(O=c.pointerX,H=c.pointerY):(O=n._offset+z.x,H=a._offset+z.y);var E,P,S=i.readability(z.color,p)<1.5?h.contrast(p):z.color,D=n.spikemode,C=n.spikethickness,I=n.spikecolor||S,V=v.getPxPosition(e,n);if(-1!==D.indexOf("toaxis")||-1!==D.indexOf("across")){if(-1!==D.indexOf("toaxis")&&(E=V,P=H),-1!==D.indexOf("across")){var F=n._counterDomainMin,R=n._counterDomainMax;"free"===n.anchor&&(F=Math.min(F,n.position),R=Math.max(R,n.position)),E=s.t+(1-R)*s.h,P=s.t+(1-F)*s.h}o.insert("line",":first-child").attr({x1:O,x2:O,y1:E,y2:P,"stroke-width":C,stroke:I,"stroke-dasharray":f.dashStyle(n.spikedash,C)}).classed("spikeline",!0).classed("crisp",!0),o.insert("line",":first-child").attr({x1:O,x2:O,y1:E,y2:P,"stroke-width":C+2,stroke:p}).classed("spikeline",!0).classed("crisp",!0)}-1!==D.indexOf("marker")&&o.insert("circle",":first-child").attr({cx:O,cy:V-("top"!==n.side?C:-C),r:C,fill:I}).classed("spikeline",!0)}}}function C(e,t){return!t||(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)}function I(e,t){return d.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}},344:function(e,t,r){"use strict";e.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},345:function(e,t,r){"use strict";var n=r(342);e.exports=n&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){e=!1}return e}()},346:function(e,t,r){"use strict";var n=r(0),a=r(102);e.exports=function(e,t,r){function i(r,i){return void 0!==t[r]?t[r]:n.coerce(e,t,a,r,i)}var o,l=i("clickmode");return t._has("cartesian")?l.indexOf("select")>-1?o="closest":(t._isHoriz=function(e,t){for(var r=t._scatterStackOpts||{},n=0;n<e.length;n++){var a=e[n],i=a.xaxis+a.yaxis,o=r[i]||{},l=o[a.stackgroup]||{};if("h"!==a.orientation&&"h"!==l.orientation)return!1}return!0}(r,t),o=t._isHoriz?"y":"x"):o="closest",i("hovermode",o)}},347:function(e,t,r){"use strict";var n=r(28).FROM_BL;e.exports=function(e,t,r){void 0===r&&(r=n[e.constraintoward||"center"]);var a=[e.r2l(e.range[0]),e.r2l(e.range[1])],i=a[0]+(a[1]-a[0])*r;e.range=e._input.range=[e.l2r(i+(a[0]-i)*t),e.l2r(i+(a[1]-i)*t)],e.setScale()}},352:function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function a(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,o,l,s,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(i(r=this._events[e]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:l=Array.prototype.slice.call(arguments,1),r.apply(this,l)}else if(a(r))for(l=Array.prototype.slice.call(arguments,1),o=(c=r.slice()).length,s=0;s<o;s++)c[s].apply(this,l);return!0},r.prototype.addListener=function(e,t){var o;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(o=i(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var r=!1;function a(){this.removeListener(e,a),r||(r=!0,t.apply(this,arguments))}return a.listener=t,this.on(e,a),this},r.prototype.removeListener=function(e,t){var r,i,o,l;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(r=this._events[e]).length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(r)){for(l=o;l-- >0;)if(r[l]===t||r[l].listener&&r[l].listener===t){i=l;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},353:function(e,t,r){"use strict";var n=r(14),a=r(337).castOption;e.exports=function(e,t,r){var i=r.marker.line,o=a(i.color,t.pts)||n.defaultLine,l=a(i.width,t.pts)||0;e.style("stroke-width",l).call(n.fill,t.color).call(n.stroke,o)}},356:function(e,t,r){"use strict";(function(t){var n,a=r(342);n="function"==typeof t.matchMedia?!t.matchMedia("(hover: none)").matches:a,e.exports=n}).call(t,r(10))},357:function(e,t,r){"use strict";var n=r(3),a=r(0),i=r(17),o=r(358),l=r(41),s=r(332);e.exports=function(e,t,r){for(var c=e.legend||{},d=0,u=!1,f="normal",h=0;h<r.length;h++){var p=r[h];p.visible&&((p.showlegend||p._dfltShowLegend&&!(p._module&&p._module.attributes&&p._module.attributes.showlegend&&!1===p._module.attributes.showlegend.dflt))&&(d++,p.showlegend&&(u=!0,(n.traceIs(p,"pie-like")||!0===p._input.showlegend)&&d++)),(n.traceIs(p,"bar")&&"stack"===t.barmode||-1!==["tonextx","tonexty"].indexOf(p.fill))&&(f=s.isGrouped({traceorder:f})?"grouped+reversed":"reversed"),void 0!==p.legendgroup&&""!==p.legendgroup&&(f=s.isReversed({traceorder:f})?"reversed+grouped":"grouped"))}var v=a.coerce(e,t,l,"showlegend",u&&d>1);if(!1!==v||c.uirevision){var m=i.newContainer(t,"legend");if(_("uirevision",t.uirevision),!1!==v){_("bgcolor",t.paper_bgcolor),_("bordercolor"),_("borderwidth"),a.coerceFont(_,"font",t.font);var g,x,y,b=_("orientation");"h"===b?(g=0,n.getComponentMethod("rangeslider","isVisible")(e.xaxis)?(x=1.1,y="bottom"):(x=-.1,y="top")):(g=1.02,x=1,y="auto"),_("traceorder",f),s.isGrouped(t.legend)&&_("tracegroupgap"),_("itemsizing"),_("itemwidth"),_("itemclick"),_("itemdoubleclick"),_("x",g),_("xanchor"),_("y",x),_("yanchor",y),_("valign"),a.noneOrAll(c,m,["x","y"]),_("title.text")&&(_("title.side","h"===b?"left":"top"),a.coerceFont(_,"title.font",t.font))}}function _(e,t){return a.coerce(c,m,o,e,t)}}},358:function(e,t,r){"use strict";var n=r(11),a=r(40);e.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:n({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:n({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},359:function(e,t,r){"use strict";var n=r(4),a=r(0),i=r(57),o=r(3),l=r(331),s=r(328),c=r(38),d=r(14),u=r(39),f=r(368),h=r(344),p=r(28),v=p.LINE_SPACING,m=p.FROM_TL,g=p.FROM_BR,x=r(369),y=r(360),b=r(332);function _(e,t,r,n,a){var i=r.data()[0][0].trace,s={event:a,node:r.node(),curveNumber:i.index,expandedIndex:i._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};if(i._group&&(s.group=i._group),o.traceIs(i,"pie-like")&&(s.label=r.datum()[0].label),!1!==l.triggerHandler(e,"plotly_legendclick",s))if(1===n)t._clickTimeout=setTimeout(function(){f(r,e,n)},e._context.doubleClickDelay);else if(2===n){t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0,!1!==l.triggerHandler(e,"plotly_legenddoubleclick",s)&&f(r,e,n)}}function T(e,t,r){var n,i=e.data()[0][0],l=i.trace,s=o.traceIs(l,"pie-like"),d=l.index,f=r._main&&t._context.edits.legendText&&!s,p=r._maxNameLength;r.entries?n=i.text:(n=s?i.label:l.name,l._meta&&(n=a.templateString(n,l._meta)));var v=a.ensureSingle(e,"text","legendtext");v.attr("text-anchor","start").call(c.font,r.font).text(f?L(n,p):n);var m=r.itemwidth+2*h.itemGap;u.positionText(v,m,0),f?v.call(u.makeEditable,{gd:t,text:n}).call(k,e,t,r).on("edit",function(n){this.text(L(n,p)).call(k,e,t,r);var l=i.trace._fullInput||{},s={};if(o.hasTransform(l,"groupby")){var c=o.getTransformIndices(l,"groupby"),u=c[c.length-1],f=a.keyedContainer(l,"transforms["+u+"].styles","target","value.name");f.set(i.trace._group,n),s=f.constructUpdate()}else s.name=n;return o.call("_guiRestyle",t,s,d)}):k(v,e,t,r)}function L(e,t){var r=Math.max(4,t);if(e&&e.trim().length>=r/2)return e;for(var n=r-(e=e||"").length;n>0;n--)e+=" ";return e}function w(e,t){var r,i=t._context.doubleClickDelay,o=1,l=a.ensureSingle(e,"rect","legendtoggle",function(e){t._context.staticPlot||e.style("cursor","pointer").attr("pointer-events","all"),e.call(d.fill,"rgba(0,0,0,0)")});t._context.staticPlot||(l.on("mousedown",function(){(r=(new Date).getTime())-t._legendMouseDownTime<i?o+=1:(o=1,t._legendMouseDownTime=r)}),l.on("mouseup",function(){if(!t._dragged&&!t._editing){var r=t._fullLayout.legend;(new Date).getTime()-t._legendMouseDownTime>i&&(o=Math.max(o-1,1)),_(t,r,e,o,n.event)}}))}function k(e,t,r,n){n._main||e.attr("data-notex",!0),u.convertToTspans(e,r,function(){!function(e,t,r){var n=e.data()[0][0];if(r._main&&n&&!n.trace.showlegend)return void e.remove();var a=e.select("g[class*=math-group]"),i=a.node();r||(r=t._fullLayout.legend);var o,l,s=r.borderwidth,d=(n?r:r.title).font.size*v;if(i){var f=c.bBox(i);o=f.height,l=f.width,n?c.setTranslate(a,0,.25*o):c.setTranslate(a,s,.75*o+s)}else{var p=e.select(n?".legendtext":".legendtitletext"),m=u.lineCount(p),g=p.node();o=d*m,l=g?c.bBox(g).width:0;var x=d*((m-1)/2-.3);if(n){var y=r.itemwidth+2*h.itemGap;u.positionText(p,y,-x)}else u.positionText(p,h.titlePad+s,d+s)}n?(n.lineHeight=d,n.height=Math.max(o,16)+3,n.width=l):(r._titleWidth=l,r._titleHeight=o)}(t,r,n)})}function M(e){return a.isRightAnchor(e)?"right":a.isCenterAnchor(e)?"center":"left"}function A(e){return a.isBottomAnchor(e)?"bottom":a.isMiddleAnchor(e)?"middle":"top"}e.exports=function(e,t){var r,l=e._fullLayout,u="legend"+l._uid;if(t?(r=t.layer,u+="-hover"):((t=l.legend||{})._main=!0,r=l._infolayer),r){var f;if(e._legendMouseDownTime||(e._legendMouseDownTime=0),t._main){if(!e.calcdata)return;f=l.showlegend&&x(e.calcdata,t)}else{if(!t.entries)return;f=x(t.entries,t)}var p=l.hiddenlabels||[];if(t._main&&(!l.showlegend||!f.length))return r.selectAll(".legend").remove(),l._topdefs.select("#"+u).remove(),i.autoMargin(e,"legend");var v=a.ensureSingle(r,"g","legend",function(e){t._main&&e.attr("pointer-events","all")}),L=a.ensureSingleById(l._topdefs,"clipPath",u,function(e){e.append("rect")}),O=a.ensureSingle(v,"rect","bg",function(e){e.attr("shape-rendering","crispEdges")});O.call(d.stroke,t.bordercolor).call(d.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px");var H=a.ensureSingle(v,"g","scrollbox"),z=t.title;if(t._titleWidth=0,t._titleHeight=0,z.text){var E=a.ensureSingle(H,"text","legendtitletext");E.attr("text-anchor","start").call(c.font,z.font).text(z.text),k(E,H,e,t)}else H.selectAll(".legendtitletext").remove();var P=a.ensureSingle(v,"rect","scrollbar",function(e){e.attr(h.scrollBarEnterAttrs).call(d.fill,h.scrollBarColor)}),S=H.selectAll("g.groups").data(f);S.enter().append("g").attr("class","groups"),S.exit().remove();var D=S.selectAll("g.traces").data(a.identity);D.enter().append("g").attr("class","traces"),D.exit().remove(),D.style("opacity",function(e){var t=e[0].trace;return o.traceIs(t,"pie-like")?-1!==p.indexOf(e[0].label)?.5:1:"legendonly"===t.visible?.5:1}).each(function(){n.select(this).call(T,e,t)}).call(y,e,t).each(function(){t._main&&n.select(this).call(w,e)}),a.syncOrAsync([i.previousPromises,function(){return function(e,t,r,a){var i=e._fullLayout;a||(a=i.legend);var o=i._size,l=b.isVertical(a),s=b.isGrouped(a),d=a.borderwidth,u=2*d,f=h.itemGap,p=a.itemwidth+2*f,v=2*(d+f),m=A(a),g=a.y<0||0===a.y&&"top"===m,x=a.y>1||1===a.y&&"bottom"===m;a._maxHeight=Math.max(g||x?i.height/2:o.h,30);var y=0;a._width=0,a._height=0;var _=function(e){var t=0,r=0,n=e.title.side;n&&(-1!==n.indexOf("left")&&(t=e._titleWidth),-1!==n.indexOf("top")&&(r=e._titleHeight));return[t,r]}(a);if(l)r.each(function(e){var t=e[0].height;c.setTranslate(this,d+_[0],d+_[1]+a._height+t/2+f),a._height+=t,a._width=Math.max(a._width,e[0].width)}),y=p+a._width,a._width+=f+p+u,a._height+=v,s&&(t.each(function(e,t){c.setTranslate(this,0,t*a.tracegroupgap)}),a._height+=(a._lgroupsLength-1)*a.tracegroupgap);else{var T=M(a),L=a.x<0||0===a.x&&"right"===T,w=a.x>1||1===a.x&&"left"===T,k=x||g,O=i.width/2;a._maxWidth=Math.max(L?k&&"left"===T?o.l+o.w:O:w?k&&"right"===T?o.r+o.w:O:o.w,2*p);var H=0,z=0;r.each(function(e){var t=e[0].width+p;H=Math.max(H,t),z+=t}),y=null;var E=0;if(s){var P=0,S=0,D=0;t.each(function(){var e=0,t=0;n.select(this).selectAll("g.traces").each(function(r){var n=r[0].height;c.setTranslate(this,_[0],_[1]+d+f+n/2+t),t+=n,e=Math.max(e,p+r[0].width)}),P=Math.max(P,t);var r=e+f;r+d+S>a._maxWidth&&(E=Math.max(E,S),S=0,D+=P+a.tracegroupgap,P=t),c.setTranslate(this,S,D),S+=r}),a._width=Math.max(E,S)+d,a._height=D+P+v}else{var C=r.size(),I=z+u+(C-1)*f<a._maxWidth,V=0,F=0,R=0,B=0;r.each(function(e){var t=e[0].height,r=p+e[0].width,n=(I?r:H)+f;n+d+F-f>=a._maxWidth&&(E=Math.max(E,B),F=0,R+=V,a._height+=V,V=0),c.setTranslate(this,_[0]+d+F,_[1]+d+R+t/2+f),B=F+r+f,F+=n,V=Math.max(V,t)}),I?(a._width=F+u,a._height=V+v):(a._width=Math.max(E,B)+u,a._height+=V+v)}}a._width=Math.ceil(Math.max(a._width+_[0],a._titleWidth+2*(d+h.titlePad))),a._height=Math.ceil(Math.max(a._height+_[1],a._titleHeight+2*(d+h.itemGap))),a._effHeight=Math.min(a._height,a._maxHeight);var G=e._context.edits,Z=G.legendText||G.legendPosition;r.each(function(e){var t=n.select(this).select(".legendtoggle"),r=e[0].height,a=Z?p:y||p+e[0].width;l||(a+=f/2),c.setRect(t,0,-r/2,a,r)})}(e,S,D,t)},function(){if(!t._main||!function(e){var t=e._fullLayout.legend,r=M(t),n=A(t);return i.autoMargin(e,"legend",{x:t.x,y:t.y,l:t._width*m[r],r:t._width*g[r],b:t._effHeight*g[n],t:t._effHeight*m[n]})}(e)){var d,f,p,x,y=l._size,b=t.borderwidth,T=y.l+y.w*t.x-m[M(t)]*t._width,w=y.t+y.h*(1-t.y)-m[A(t)]*t._effHeight;if(t._main&&l.margin.autoexpand){var k=T,z=w;T=a.constrain(T,0,l.width-t._width),w=a.constrain(w,0,l.height-t._effHeight),T!==k&&a.log("Constrain legend.x to make legend fit inside graph"),w!==z&&a.log("Constrain legend.y to make legend fit inside graph")}if(t._main&&c.setTranslate(v,T,w),P.on(".drag",null),v.on("wheel",null),!t._main||t._height<=t._maxHeight||e._context.staticPlot){var E=t._effHeight;t._main||(E=t._height),O.attr({width:t._width-b,height:E-b,x:b/2,y:b/2}),c.setTranslate(H,0,0),L.select("rect").attr({width:t._width-2*b,height:E-2*b,x:b,y:b}),c.setClipUrl(H,u,e),c.setRect(P,0,0,0,0),delete t._scrollY}else{var S,D,C,I=Math.max(h.scrollBarMinHeight,t._effHeight*t._effHeight/t._height),V=t._effHeight-I-2*h.scrollBarMargin,F=t._height-t._effHeight,R=V/F,B=Math.min(t._scrollY||0,F);O.attr({width:t._width-2*b+h.scrollBarWidth+h.scrollBarMargin,height:t._effHeight-b,x:b/2,y:b/2}),L.select("rect").attr({width:t._width-2*b+h.scrollBarWidth+h.scrollBarMargin,height:t._effHeight-2*b,x:b,y:b+B}),c.setClipUrl(H,u,e),Y(B,I,R),v.on("wheel",function(){Y(B=a.constrain(t._scrollY+n.event.deltaY/V*F,0,F),I,R),0!==B&&B!==F&&n.event.preventDefault()});var G=n.behavior.drag().on("dragstart",function(){var e=n.event.sourceEvent;S="touchstart"===e.type?e.changedTouches[0].clientY:e.clientY,C=B}).on("drag",function(){var e=n.event.sourceEvent;2===e.buttons||e.ctrlKey||(D="touchmove"===e.type?e.changedTouches[0].clientY:e.clientY,Y(B=function(e,t,r){var n=(r-t)/R+e;return a.constrain(n,0,F)}(C,S,D),I,R))});P.call(G);var Z=n.behavior.drag().on("dragstart",function(){var e=n.event.sourceEvent;"touchstart"===e.type&&(S=e.changedTouches[0].clientY,C=B)}).on("drag",function(){var e=n.event.sourceEvent;"touchmove"===e.type&&(D=e.changedTouches[0].clientY,Y(B=function(e,t,r){var n=(t-r)/R+e;return a.constrain(n,0,F)}(C,S,D),I,R))});H.call(Z)}if(e._context.edits.legendPosition)v.classed("cursor-move",!0),s.init({element:v.node(),gd:e,prepFn:function(){var e=c.getTranslate(v);p=e.x,x=e.y},moveFn:function(e,r){var n=p+e,a=x+r;c.setTranslate(v,n,a),d=s.align(n,0,y.l,y.l+y.w,t.xanchor),f=s.align(a,0,y.t+y.h,y.t,t.yanchor)},doneFn:function(){void 0!==d&&void 0!==f&&o.call("_guiRelayout",e,{"legend.x":d,"legend.y":f})},clickFn:function(t,n){var a=r.selectAll("g.traces").filter(function(){var e=this.getBoundingClientRect();return n.clientX>=e.left&&n.clientX<=e.right&&n.clientY>=e.top&&n.clientY<=e.bottom});a.size()>0&&_(e,v,a,t,n)}})}function Y(r,n,a){t._scrollY=e._fullLayout.legend._scrollY=r,c.setTranslate(H,0,-r),c.setRect(P,t._width,h.scrollBarMargin+r*a,h.scrollBarWidth,n),L.select("rect").attr("y",b+r)}}],e)}}},360:function(e,t,r){"use strict";var n=r(4),a=r(3),i=r(0),o=i.strTranslate,l=r(38),s=r(14),c=r(29).extractOpts,d=r(101),u=r(353),f=r(337).castOption,h=r(344),p=12,v=5,m=2,g=10,x=5;function y(e,t){return(t?"radial":"horizontal")+(e?"":"reversed")}e.exports=function(e,t,r){var b=t._fullLayout;r||(r=b.legend);var _="constant"===r.itemsizing,T=r.itemwidth,L=(T+2*h.itemGap)/2,w=o(L,0),k=function(e,t,r,n){var a;if(e+1)a=e;else{if(!(t&&t.width>0))return 0;a=t.width}return _?n:Math.min(a,r)};function M(e,t,r){var i=e[0].trace,o=i.marker||{},l=o.line||{},c=r?i.visible&&i.type===r:a.traceIs(i,"bar"),d=n.select(t).select("g.legendpoints").selectAll("path.legend"+r).data(c?[e]:[]);d.enter().append("path").classed("legend"+r,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",w),d.exit().remove(),d.each(function(e){var t=n.select(this),r=e[0],a=k(r.mlw,o.line,x,m);t.style("stroke-width",a+"px").call(s.fill,r.mc||o.color),a&&s.stroke(t,r.mlc||l.color)})}function A(e,t,r){var o=e[0],l=o.trace,s=r?l.visible&&l.type===r:a.traceIs(l,r),c=n.select(t).select("g.legendpoints").selectAll("path.legend"+r).data(s?[e]:[]);if(c.enter().append("path").classed("legend"+r,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",w),c.exit().remove(),c.size()){var d=(l.marker||{}).line,h=k(f(d.width,o.pts),d,x,m),p=i.minExtend(l,{marker:{line:{width:h}}});p.marker.line.color=d.color;var v=i.minExtend(o,{trace:p});u(c,v,p)}}e.each(function(e){var t=n.select(this),a=i.ensureSingle(t,"g","layers");a.style("opacity",e[0].trace.opacity);var l=r.valign,s=e[0].lineHeight,c=e[0].height;if("middle"!==l&&s&&c){var d={top:1,bottom:-1}[l]*(.5*(s-c+3));a.attr("transform",o(0,d))}else a.attr("transform",null);a.selectAll("g.legendfill").data([e]).enter().append("g").classed("legendfill",!0),a.selectAll("g.legendlines").data([e]).enter().append("g").classed("legendlines",!0);var u=a.selectAll("g.legendsymbols").data([e]);u.enter().append("g").classed("legendsymbols",!0),u.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)}).each(function(e){var r,a=e[0].trace,o=[];if(a.visible)switch(a.type){case"histogram2d":case"heatmap":o=[["M-15,-2V4H15V-2Z"]],r=!0;break;case"choropleth":case"choroplethmapbox":o=[["M-6,-6V6H6V-6Z"]],r=!0;break;case"densitymapbox":o=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],r="radial";break;case"cone":o=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],r=!1;break;case"streamtube":o=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],r=!1;break;case"surface":o=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],r=!0;break;case"mesh3d":o=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],r=!1;break;case"volume":o=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],r=!0;break;case"isosurface":o=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],r=!1}var d=n.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(o);d.enter().append("path").classed("legend3dandfriends",!0).attr("transform",w).style("stroke-miterlimit",1),d.exit().remove(),d.each(function(e,o){var d,u=n.select(this),f=c(a),h=f.colorscale,p=f.reversescale;if(h){if(!r){var v=h.length;d=0===o?h[p?v-1:0][1]:1===o?h[p?0:v-1][1]:h[Math.floor((v-1)/2)][1]}}else{var m=a.vertexcolor||a.facecolor||a.color;d=i.isArrayOrTypedArray(m)?m[o]||m[0]:m}u.attr("d",e[0]),d?u.call(s.fill,d):u.call(function(e){if(e.size()){var n="legendfill-"+a.uid;l.gradient(e,t,n,y(p,"radial"===r),h,"fill")}})})}).each(function(e){var t=e[0].trace,r="waterfall"===t.type;if(e[0]._distinct&&r){var a=e[0].trace[e[0].dir].marker;return e[0].mc=a.color,e[0].mlw=a.line.width,e[0].mlc=a.line.color,M(e,this,"waterfall")}var i=[];t.visible&&r&&(i=e[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var o=n.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(i);o.enter().append("path").classed("legendwaterfall",!0).attr("transform",w).style("stroke-miterlimit",1),o.exit().remove(),o.each(function(e){var r=n.select(this),a=t[e[0]].marker,i=k(void 0,a.line,x,m);r.attr("d",e[1]).style("stroke-width",i+"px").call(s.fill,a.color),i&&r.call(s.stroke,a.line.color)})}).each(function(e){M(e,this,"funnel")}).each(function(e){M(e,this)}).each(function(e){var r=e[0].trace,o=n.select(this).select("g.legendpoints").selectAll("path.legendbox").data(r.visible&&a.traceIs(r,"box-violin")?[e]:[]);o.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",w),o.exit().remove(),o.each(function(){var e=n.select(this);if("all"!==r.boxpoints&&"all"!==r.points||0!==s.opacity(r.fillcolor)||0!==s.opacity((r.line||{}).color)){var a=k(void 0,r.line,x,m);e.style("stroke-width",a+"px").call(s.fill,r.fillcolor),a&&s.stroke(e,r.line.color)}else{var c=i.minExtend(r,{marker:{size:_?p:i.constrain(r.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});o.call(l.pointStyle,c,t)}})}).each(function(e){A(e,this,"funnelarea")}).each(function(e){A(e,this,"pie")}).each(function(e){var r,a,o=e[0],s=o.trace,u=s.visible&&s.fill&&"none"!==s.fill,f=d.hasLines(s),h=s.contours,p=!1,m=!1,x=c(s),b=x.colorscale,_=x.reversescale;if(h){var L=h.coloring;"lines"===L?p=!0:f="none"===L||"heatmap"===L||h.showlines,"constraint"===h.type?u="="!==h._operation:"fill"!==L&&"heatmap"!==L||(m=!0)}var w=d.hasMarkers(s)||d.hasText(s)||!u&&!m?"M5,0":f||p?"M5,-2":"M5,-3",M=n.select(this),A=M.select(".legendfill").selectAll("path").data(u||m?[e]:[]);if(A.enter().append("path").classed("js-fill",!0),A.exit().remove(),A.attr("d",w+"h"+T+"v6h-"+T+"z").call(u?l.fillGroupStyle:function(e){if(e.size()){var r="legendfill-"+s.uid;l.gradient(e,t,r,y(_),b,"fill")}}),f||p){var O=k(void 0,s.line,g,v);a=i.minExtend(s,{line:{width:O}}),r=[i.minExtend(o,{trace:a})]}var H=M.select(".legendlines").selectAll("path").data(f||p?[r]:[]);H.enter().append("path").classed("js-line",!0),H.exit().remove(),H.attr("d",w+(p?"l"+T+",0.0001":"h"+T)).call(f?l.lineGroupStyle:function(e){if(e.size()){var r="legendline-"+s.uid;l.lineGroupStyle(e),l.gradient(e,t,r,y(_),b,"stroke")}})}).each(function(e){var r,a,o=e[0],s=o.trace,c=d.hasMarkers(s),u=d.hasText(s),f=d.hasLines(s);function h(e,t,r,n){var a=i.nestedProperty(s,e).get(),o=i.isArrayOrTypedArray(a)&&t?t(a):a;if(_&&o&&void 0!==n&&(o=n),r){if(o<r[0])return r[0];if(o>r[1])return r[1]}return o}function g(e){return o._distinct&&o.index&&e[o.index]?e[o.index]:e[0]}if(c||u||f){var x={},y={};if(c){x.mc=h("marker.color",g),x.mx=h("marker.symbol",g),x.mo=h("marker.opacity",i.mean,[.2,1]),x.mlc=h("marker.line.color",g),x.mlw=h("marker.line.width",i.mean,[0,5],m),y.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var b=h("marker.size",i.mean,[2,16],p);x.ms=b,y.marker.size=b}f&&(y.line={width:h("line.width",g,[0,10],v)}),u&&(x.tx="Aa",x.tp=h("textposition",g),x.ts=10,x.tc=h("textfont.color",g),x.tf=h("textfont.family",g)),r=[i.minExtend(o,x)],(a=i.minExtend(s,y)).selectedpoints=null,a.texttemplate=null}var T=n.select(this).select("g.legendpoints"),L=T.selectAll("path.scatterpts").data(c?r:[]);L.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",w),L.exit().remove(),L.call(l.pointStyle,a,t),c&&(r[0].mrc=3);var k=T.selectAll("g.pointtext").data(u?r:[]);k.enter().append("g").classed("pointtext",!0).append("text").attr("transform",w),k.exit().remove(),k.selectAll("text").call(l.textPointStyle,a,t)}).each(function(e){var t=e[0].trace,r=n.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(t.visible&&"candlestick"===t.type?[e,e]:[]);r.enter().append("path").classed("legendcandle",!0).attr("d",function(e,t){return t?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",w).style("stroke-miterlimit",1),r.exit().remove(),r.each(function(e,r){var a=n.select(this),i=t[r?"increasing":"decreasing"],o=k(void 0,i.line,x,m);a.style("stroke-width",o+"px").call(s.fill,i.fillcolor),o&&s.stroke(a,i.line.color)})}).each(function(e){var t=e[0].trace,r=n.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(t.visible&&"ohlc"===t.type?[e,e]:[]);r.enter().append("path").classed("legendohlc",!0).attr("d",function(e,t){return t?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",w).style("stroke-miterlimit",1),r.exit().remove(),r.each(function(e,r){var a=n.select(this),i=t[r?"increasing":"decreasing"],o=k(void 0,i.line,x,m);a.style("fill","none").call(l.dashLine,i.line.dash,o),o&&s.stroke(a,i.line.color)})})}},363:function(e,t){var r={left:0,top:0};e.exports=function(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var a=e.clientX||0,i=e.clientY||0,o=(l=t,l===window||l===document||l===document.body?r:l.getBoundingClientRect());var l;return n[0]=a-o.left,n[1]=i-o.top,n}},364:function(e,t,r){"use strict";e.exports=function(e,t,r,n,a){var i=(e-r)/(n-r),o=i+t/(n-r),l=(i+o)/2;return"left"===a||"bottom"===a?i:"center"===a||"middle"===a?l:"right"===a||"top"===a?o:i<2/3-l?i:o>4/3-l?o:l}},365:function(e,t,r){"use strict";var n=r(0),a=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];e.exports=function(e,t,r,i){return e="left"===r?0:"center"===r?1:"right"===r?2:n.constrain(Math.floor(3*e),0,2),t="bottom"===i?0:"middle"===i?1:"top"===i?2:n.constrain(Math.floor(3*t),0,2),a[t][e]}},366:function(e,t,r){"use strict";var n=r(331),a=r(108),i=r(62).getGraphDiv,o=r(104),l=e.exports={};l.wrapped=function(e,t,r){(e=i(e))._fullLayout&&a.clear(e._fullLayout._uid+o.HOVERID),l.raw(e,t,r)},l.raw=function(e,t){var r=e._fullLayout,a=e._hoverdata;t||(t={}),t.target&&!1===n.triggerHandler(e,"plotly_beforehover",t)||(r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),e._hoverdata=void 0,t.target&&a&&e.emit("plotly_unhover",{event:t,points:a}))}},367:function(e,t,r){"use strict";var n=r(330),a="data-savedcursor";e.exports=function(e,t){var r=e.attr(a);if(t){if(!r){for(var i=(e.attr("class")||"").split(" "),o=0;o<i.length;o++){var l=i[o];0===l.indexOf("cursor-")&&e.attr(a,l.substr(7)).classed(l,!1)}e.attr(a)||e.attr(a,"!!")}n(e,t)}else r&&(e.attr(a,null),"!!"===r?n(e):n(e,r))}},368:function(e,t,r){"use strict";var n=r(0),a=r(3),i=!0;e.exports=function(e,t,r){var o=t._fullLayout;if(!t._dragged&&!t._editing){var l,s=o.legend.itemclick,c=o.legend.itemdoubleclick;if(1===r&&"toggle"===s&&"toggleothers"===c&&i&&t.data&&t._context.showTips?(n.notifier(n._(t,"Double-click on legend to isolate one trace"),"long"),i=!1):i=!1,1===r?l=s:2===r&&(l=c),l){var d,u,f,h,p,v=o.hiddenlabels?o.hiddenlabels.slice():[],m=e.data()[0][0],g=t._fullData,x=m.trace,y=x.legendgroup,b={},_=[],T=[],L=[];if(a.traceIs(x,"pie-like")){var w=m.label,k=v.indexOf(w);"toggle"===l?-1===k?v.push(w):v.splice(k,1):"toggleothers"===l&&(v=[],t.calcdata[0].forEach(function(e){w!==e.label&&v.push(e.label)}),t._fullLayout.hiddenlabels&&t._fullLayout.hiddenlabels.length===v.length&&-1===k&&(v=[])),a.call("_guiRelayout",t,"hiddenlabels",v)}else{var M,A=y&&y.length,O=[];if(A)for(d=0;d<g.length;d++)(M=g[d]).visible&&M.legendgroup===y&&O.push(d);if("toggle"===l){var H;switch(x.visible){case!0:H="legendonly";break;case!1:H=!1;break;case"legendonly":H=!0}if(A)for(d=0;d<g.length;d++)!1!==g[d].visible&&g[d].legendgroup===y&&F(g[d],H);else F(x,H)}else if("toggleothers"===l){var z,E,P,S,D=!0;for(d=0;d<g.length;d++)if(z=g[d]===x,P=!0!==g[d].showlegend,!(z||P||(E=A&&g[d].legendgroup===y)||!0!==g[d].visible||a.traceIs(g[d],"notLegendIsolatable"))){D=!1;break}for(d=0;d<g.length;d++)if(!1!==g[d].visible&&!a.traceIs(g[d],"notLegendIsolatable"))switch(x.visible){case"legendonly":F(g[d],!0);break;case!0:S=!!D||"legendonly",z=g[d]===x,P=!0!==g[d].showlegend&&!g[d].legendgroup,E=z||A&&g[d].legendgroup===y,F(g[d],!(!E&&!P)||S)}}for(d=0;d<T.length;d++)if(f=T[d]){var C=f.constructUpdate(),I=Object.keys(C);for(u=0;u<I.length;u++)h=I[u],(b[h]=b[h]||[])[L[d]]=C[h]}for(p=Object.keys(b),d=0;d<p.length;d++)for(h=p[d],u=0;u<_.length;u++)b[h].hasOwnProperty(u)||(b[h][u]=void 0);a.call("_guiRestyle",t,b,_)}}}function V(e,t,r){var n=_.indexOf(e),a=b[t];return a||(a=b[t]=[]),-1===_.indexOf(e)&&(_.push(e),n=_.length-1),a[n]=r,n}function F(e,t){var r=e._fullInput;if(a.hasTransform(r,"groupby")){var i=T[r.index];if(!i){var o=a.getTransformIndices(r,"groupby"),l=o[o.length-1];i=n.keyedContainer(r,"transforms["+l+"].styles","target","value.visible"),T[r.index]=i}var s=i.get(e._group);void 0===s&&(s=!0),!1!==s&&i.set(e._group,t),L[r.index]=V(r.index,"visible",!1!==r.visible)}else{var c=!1!==r.visible&&t;V(r.index,"visible",c)}}}},369:function(e,t,r){"use strict";var n=r(3),a=r(332);e.exports=function(e,t){var r,i,o={},l=[],s=!1,c={},d=0,u=0,f=t._main;function h(e,r){if(""!==e&&a.isGrouped(t))-1===l.indexOf(e)?(l.push(e),s=!0,o[e]=[[r]]):o[e].push([r]);else{var n="~~i"+d;l.push(n),o[n]=[[r]],d++}}for(r=0;r<e.length;r++){var p=e[r],v=p[0],m=v.trace,g=m.legendgroup;if(!f||m.visible&&m.showlegend)if(n.traceIs(m,"pie-like"))for(c[g]||(c[g]={}),i=0;i<p.length;i++){var x=p[i].label;c[g][x]||(h(g,{label:x,color:p[i].color,i:p[i].i,trace:m,pts:p[i].pts}),c[g][x]=!0,u=Math.max(u,(x||"").length))}else h(g,v),u=Math.max(u,(m.name||"").length)}if(!l.length)return[];var y,b,_=l.length;if(s&&a.isGrouped(t))for(b=new Array(_),r=0;r<_;r++)y=o[l[r]],b[r]=a.isReversed(t)?y.reverse():y;else{for(b=[new Array(_)],r=0;r<_;r++)y=o[l[r]][0],b[0][a.isReversed(t)?_-r-1:r]=y;_=1}return t._lgroupsLength=_,t._maxNameLength=u,b}},370:function(e,t,r){"use strict";var n=r(0),a=r(333),i=r(102);e.exports=function(e,t){a(e,t,function(r,a){return n.coerce(e,t,i,r,a)})}},371:function(e,t,r){"use strict";var n=r(0),a=r(106),i=r(333);e.exports=function(e,t,r,o){var l=n.extendFlat({},o.hoverlabel);t.hovertemplate&&(l.namelength=-1),i(e,t,function(r,i){return n.coerce(e,t,a,r,i)},l)}},372:function(e,t,r){"use strict";var n=r(0),a=r(100).isUnifiedHover,i=r(102),o=r(346),l=r(333);e.exports=function(e,t,r){function s(r,a){return n.coerce(e,t,i,r,a)}var c=o(e,t,r);c&&(s("hoverdistance"),s("spikedistance",a(c)?-1:void 0)),"select"===s("dragmode")&&s("selectdirection");var d=t._has("mapbox"),u=t._has("geo"),f=t._basePlotModules.length;"zoom"===t.dragmode&&((d||u)&&1===f||d&&u&&2===f)&&(t.dragmode="pan"),l(e,t,s)}},373:function(e,t,r){"use strict";var n=r(0),a=r(3);function i(e,t,r,a){a=a||n.identity,Array.isArray(e)&&(t[0][r]=a(e))}e.exports=function(e){var t=e.calcdata,r=e._fullLayout;function o(e){return function(t){return n.coerceHoverinfo({hoverinfo:t},{_module:e._module},r)}}for(var l=0;l<t.length;l++){var s=t[l],c=s[0].trace;if(!a.traceIs(c,"pie-like")){var d=a.traceIs(c,"2dMap")?i:n.fillArray;d(c.hoverinfo,s,"hi",o(c)),c.hovertemplate&&d(c.hovertemplate,s,"ht"),c.hoverlabel&&(d(c.hoverlabel.bgcolor,s,"hbg"),d(c.hoverlabel.bordercolor,s,"hbc"),d(c.hoverlabel.font.size,s,"hts"),d(c.hoverlabel.font.color,s,"htc"),d(c.hoverlabel.font.family,s,"htf"),d(c.hoverlabel.namelength,s,"hnl"),d(c.hoverlabel.align,s,"hta"))}}}},374:function(e,t,r){"use strict";var n=r(3),a=r(343).hover;e.exports=function(e,t,r){var i=n.getComponentMethod("annotations","onClick")(e,e._hoverdata);function o(){e.emit("plotly_click",{points:e._hoverdata,event:t})}void 0!==r&&a(e,t,r,!0),e._hoverdata&&t&&t.target&&(i&&i.then?i.then(o):o(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},377:function(e,t,r){"use strict";var n=r(0).dateTick0,a=r(5).ONEWEEK;function i(e,t){return n(t,e%a==0?1:0)}e.exports=function(e,t,r,n,a){if(a||(a={x:!0,y:!0}),a.x){var o=n("xperiod");o&&(n("xperiod0",i(o,t.xcalendar)),n("xperiodalignment"))}if(a.y){var l=n("yperiod");l&&(n("yperiod0",i(l,t.ycalendar)),n("yperiodalignment"))}}},400:function(e,t,r){"use strict";var n=r(0),a=r(3);e.exports=function(e,t,r,i){var o,l=i("x"),s=i("y");if(a.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],r),l){var c=n.minRowLength(l);s?o=Math.min(c,n.minRowLength(s)):(o=c,i("y0"),i("dy"))}else{if(!s)return 0;o=n.minRowLength(s),i("x0"),i("dx")}return t._length=o,o}},408:function(e,t,r){"use strict";var n=r(110),a=r(60).hovertemplateAttrs,i=r(60).texttemplateAttrs,o=r(43),l=r(11),s=r(419),c=r(7).extendFlat,d=l({editType:"calc",arrayOk:!0,colorEditType:"style"}),u=c({line:c({width:c({},n.marker.line.width,{dflt:0}),editType:"calc"},o("marker.line")),editType:"calc"},o("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});e.exports={x:n.x,x0:n.x0,dx:n.dx,y:n.y,y0:n.y0,dy:n.dy,xperiod:n.xperiod,yperiod:n.yperiod,xperiod0:n.xperiod0,yperiod0:n.yperiod0,xperiodalignment:n.xperiodalignment,yperiodalignment:n.yperiodalignment,text:n.text,texttemplate:i({editType:"plot"},{keys:s.eventDataKeys}),hovertext:n.hovertext,hovertemplate:a({},{keys:s.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:c({},d,{}),insidetextfont:c({},d,{}),outsidetextfont:c({},d,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:c({},n.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:u,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:n.selected.marker.opacity,color:n.selected.marker.color,editType:"style"},textfont:n.selected.textfont,editType:"style"},unselected:{marker:{opacity:n.unselected.marker.opacity,color:n.unselected.marker.color,editType:"style"},textfont:n.unselected.textfont,editType:"style"},r:n.r,t:n.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},419:function(e,t,r){"use strict";e.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},420:function(e,t,r){"use strict";var n=r(4),a=r(0);function i(e){return"_"+e+"Text_minsize"}e.exports={recordMinTextSize:function(e,t,r){if(r.uniformtext.mode){var n=i(e),a=r.uniformtext.minsize,o=t.scale*t.fontSize;t.hide=o<a,r[n]=r[n]||1/0,t.hide||(r[n]=Math.min(r[n],Math.max(o,a)))}},clearMinTextSize:function(e,t){t[i(e)]=void 0},resizeText:function(e,t,r){var i=e._fullLayout,o=i["_"+r+"Text_minsize"];if(o){var l,s="hide"===i.uniformtext.mode;switch(r){case"funnelarea":case"pie":case"sunburst":l="g.slice";break;case"treemap":l="g.slice, g.pathbar";break;default:l="g.points > g.point"}t.selectAll(l).each(function(e){var t=e.transform;t&&(t.scale=s&&t.hide?0:o/t.fontSize,n.select(this).select("text").attr("transform",a.getTextTransform(t)))})}}}},427:function(e,t,r){"use strict";var n=r(7).extendFlat;t.attributes=function(e,t){e=e||{},t=t||{};var r={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},a=(e.name&&e.name,e.trace,t.description&&t.description,{x:n({},r,{}),y:n({},r,{}),editType:e.editType});return e.noGridCell||(a.row={valType:"integer",min:0,dflt:0,editType:e.editType},a.column={valType:"integer",min:0,dflt:0,editType:e.editType}),a},t.defaults=function(e,t,r,n){var a=n&&n.x||[0,1],i=n&&n.y||[0,1],o=t.grid;if(o){var l=r("domain.column");void 0!==l&&(l<o.columns?a=o._domains.x[l]:delete e.domain.column);var s=r("domain.row");void 0!==s&&(s<o.rows?i=o._domains.y[s]:delete e.domain.row)}var c=r("domain.x",a),d=r("domain.y",i);c[0]<c[1]||(e.domain.x=a.slice()),d[0]<d[1]||(e.domain.y=i.slice())}},428:function(e,t,r){"use strict";var n=r(0),a=r(14),i=r(3),o=r(400),l=r(377),s=r(473),c=r(341).getAxisGroup,d=r(408),u=n.coerceFont;function f(e,t,r,n){var a=t.orientation,i=t[{v:"x",h:"y"}[a]+"axis"],o=c(r,i)+a,l=r._alignmentOpts||{},s=n("alignmentgroup"),d=l[o];d||(d=l[o]={});var u=d[s];u?u.traces.push(t):u=d[s]={traces:[t],alignmentIndex:Object.keys(d).length,offsetGroups:{}};var f=n("offsetgroup"),h=u.offsetGroups,p=h[f];f&&(p||(p=h[f]={offsetIndex:Object.keys(h).length}),t._offsetIndex=p.offsetIndex)}function h(e,t,r,a,i,o){var l=!(!1===(o=o||{}).moduleHasSelected),s=!(!1===o.moduleHasUnselected),c=!(!1===o.moduleHasConstrain),d=!(!1===o.moduleHasCliponaxis),f=!(!1===o.moduleHasTextangle),h=!(!1===o.moduleHasInsideanchor),p=!!o.hasPathbar,v=Array.isArray(i)||"auto"===i,m=v||"inside"===i,g=v||"outside"===i;if(m||g){var x=u(a,"textfont",r.font),y=n.extendFlat({},x),b=!(e.textfont&&e.textfont.color);if(b&&delete y.color,u(a,"insidetextfont",y),p){var _=n.extendFlat({},x);b&&delete _.color,u(a,"pathbar.textfont",_)}g&&u(a,"outsidetextfont",x),l&&a("selected.textfont.color"),s&&a("unselected.textfont.color"),c&&a("constraintext"),d&&a("cliponaxis"),f&&a("textangle"),a("texttemplate")}m&&h&&a("insidetextanchor")}e.exports={supplyDefaults:function(e,t,r,c){function u(r,a){return n.coerce(e,t,d,r,a)}if(o(e,t,c,u)){l(e,t,c,u),u("orientation",t.x&&!t.y?"h":"v"),u("base"),u("offset"),u("width"),u("text"),u("hovertext"),u("hovertemplate");var f=u("textposition");h(e,0,c,u,f,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s(e,t,u,r,c);var p=(t.marker.line||{}).color,v=i.getComponentMethod("errorbars","supplyDefaults");v(e,t,p||a.defaultLine,{axis:"y"}),v(e,t,p||a.defaultLine,{axis:"x",inherit:"y"}),n.coerceSelectionMarkerOpacity(t,u)}else t.visible=!1},crossTraceDefaults:function(e,t){var r;function a(e){return n.coerce(r._input,r,d,e)}if("group"===t.barmode)for(var i=0;i<e.length;i++)"bar"===(r=e[i]).type&&(r._input,f(0,r,t,a))},handleGroupingDefaults:f,handleText:h}},473:function(e,t,r){"use strict";var n=r(14),a=r(29).hasColorscale,i=r(61);e.exports=function(e,t,r,o,l){r("marker.color",o),a(e,"marker")&&i(e,t,l,r,{prefix:"marker.",cLetter:"c"}),r("marker.line.color",n.defaultLine),a(e,"marker.line")&&i(e,t,l,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width"),r("marker.opacity"),r("selected.marker.color"),r("unselected.marker.color")}},507:function(e,t,r){"use strict";var n=r(20),a=r(427).attributes,i=r(11),o=r(40),l=r(60).hovertemplateAttrs,s=r(60).texttemplateAttrs,c=r(7).extendFlat,d=i({editType:"plot",arrayOk:!0,colorEditType:"plot"});e.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:c({},n.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:l({},{keys:["label","color","value","percent","text"]}),texttemplate:s({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:c({},d,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:c({},d,{}),outsidetextfont:c({},d,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:c({},d,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:a({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:c({},d,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},508:function(e,t,r){"use strict";e.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},509:function(e,t,r){"use strict";var n=r(1),a=r(19),i=r(14),o={};function l(e){return function(t,r){return!!t&&(!!(t=a(t)).isValid()&&(t=i.addOpacity(t,t.getAlpha()),e[r]||(e[r]=t),t))}}function s(e,t){var r,n=JSON.stringify(e),i=t[n];if(!i){for(i=e.slice(),r=0;r<e.length;r++)i.push(a(e[r]).lighten(20).toHexString());for(r=0;r<e.length;r++)i.push(a(e[r]).darken(20).toHexString());t[n]=i}return i}e.exports={calc:function(e,t){var r,a,i=[],o=e._fullLayout,s=o.hiddenlabels||[],c=t.labels,d=t.marker.colors||[],u=t.values,f=t._length,h=t._hasValues&&f;if(t.dlabel)for(c=new Array(f),r=0;r<f;r++)c[r]=String(t.label0+r*t.dlabel);var p={},v=l(o["_"+t.type+"colormap"]),m=0,g=!1;for(r=0;r<f;r++){var x,y,b;if(h){if(x=u[r],!n(x))continue;if((x=+x)<0)continue}else x=1;void 0!==(y=c[r])&&""!==y||(y=r);var _=p[y=String(y)];void 0===_?(p[y]=i.length,(b=-1!==s.indexOf(y))||(m+=x),i.push({v:x,label:y,color:v(d[r],y),i:r,pts:[r],hidden:b})):(g=!0,(a=i[_]).v+=x,a.pts.push(r),a.hidden||(m+=x),!1===a.color&&d[r]&&(a.color=v(d[r],y)))}return("funnelarea"===t.type?g:t.sort)&&i.sort(function(e,t){return t.v-e.v}),i[0]&&(i[0].vTotal=m),i},crossTraceCalc:function(e,t){var r=(t||{}).type;r||(r="pie");var n=e._fullLayout,a=e.calcdata,i=n[r+"colorway"],l=n["_"+r+"colormap"];n["extend"+r+"colors"]&&(i=s(i,o));for(var c=0,d=0;d<a.length;d++){var u=a[d];if(u[0].trace.type===r)for(var f=0;f<u.length;f++){var h=u[f];!1===h.color&&(l[h.label]?h.color=l[h.label]:(l[h.label]=h.color=i[c%i.length],c++))}}},makePullColorFn:l,generateExtendedColors:s}},580:function(e,t,r){"use strict";e.exports={attributes:r(507),supplyDefaults:r(581).supplyDefaults,supplyLayoutDefaults:r(582),layoutAttributes:r(508),calc:r(509).calc,crossTraceCalc:r(509).crossTraceCalc,plot:r(583).plot,style:r(585),styleOne:r(353),moduleType:"trace",name:"pie",basePlotModule:r(586),categories:["pie-like","pie","showLegend"],meta:{}}},581:function(e,t,r){"use strict";var n=r(1),a=r(0),i=r(507),o=r(427).defaults,l=r(428).handleText;function s(e,t){var r=Array.isArray(e),i=a.isArrayOrTypedArray(t),o=Math.min(r?e.length:1/0,i?t.length:1/0);if(isFinite(o)||(o=0),o&&i){for(var l,s=0;s<o;s++){var c=t[s];if(n(c)&&c>0){l=!0;break}}l||(o=0)}return{hasLabels:r,hasValues:i,len:o}}e.exports={handleLabelsAndValues:s,supplyDefaults:function(e,t,r,n){function c(r,n){return a.coerce(e,t,i,r,n)}var d=s(c("labels"),c("values")),u=d.len;if(t._hasLabels=d.hasLabels,t._hasValues=d.hasValues,!t._hasLabels&&t._hasValues&&(c("label0"),c("dlabel")),u){t._length=u,c("marker.line.width")&&c("marker.line.color"),c("marker.colors"),c("scalegroup");var f,h=c("text"),p=c("texttemplate");if(p||(f=c("textinfo",Array.isArray(h)?"text+percent":"percent")),c("hovertext"),c("hovertemplate"),p||f&&"none"!==f){var v=c("textposition");l(e,t,n,c,v,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(v)||"auto"===v||"outside"===v)&&c("automargin"),("inside"===v||"auto"===v||Array.isArray(v))&&c("insidetextorientation")}o(t,n,c);var m=c("hole");if(c("title.text")){var g=c("title.position",m?"middle center":"top center");m||"middle center"!==g||(t.title.position="top center"),a.coerceFont(c,"title.font",n.font)}c("sort"),c("direction"),c("rotation"),c("pull")}else t.visible=!1}}},582:function(e,t,r){"use strict";var n=r(0),a=r(508);e.exports=function(e,t){function r(r,i){return n.coerce(e,t,a,r,i)}r("hiddenlabels"),r("piecolorway",t.colorway),r("extendpiecolors")}},583:function(e,t,r){"use strict";var n=r(4),a=r(57),i=r(329),o=r(14),l=r(38),s=r(0),c=s.strScale,d=s.strTranslate,u=r(39),f=r(420),h=f.recordMinTextSize,p=f.clearMinTextSize,v=r(419).TEXTPAD,m=r(337),g=r(584),x=r(0).isValidTextValue;function y(e,t,r){var a=r[0],o=a.trace,l=a.cx,c=a.cy;"_hasHoverLabel"in o||(o._hasHoverLabel=!1),"_hasHoverEvent"in o||(o._hasHoverEvent=!1),e.on("mouseover",function(e){var r=t._fullLayout,d=t._fullData[o.index];if(!t._dragging&&!1!==r.hovermode){var u=d.hoverinfo;if(Array.isArray(u)&&(u=i.castHoverinfo({hoverinfo:[m.castOption(u,e.pts)],_module:o._module},r,0)),"all"===u&&(u="label+text+value+percent+name"),d.hovertemplate||"none"!==u&&"skip"!==u&&u){var f=e.rInscribed||0,h=l+e.pxmid[0]*(1-f),p=c+e.pxmid[1]*(1-f),v=r.separators,x=[];if(u&&-1!==u.indexOf("label")&&x.push(e.label),e.text=m.castOption(d.hovertext||d.text,e.pts),u&&-1!==u.indexOf("text")){var y=e.text;s.isValidTextValue(y)&&x.push(y)}e.value=e.v,e.valueLabel=m.formatPieValue(e.v,v),u&&-1!==u.indexOf("value")&&x.push(e.valueLabel),e.percent=e.v/a.vTotal,e.percentLabel=m.formatPiePercent(e.percent,v),u&&-1!==u.indexOf("percent")&&x.push(e.percentLabel);var b=d.hoverlabel,_=b.font;i.loneHover({trace:o,x0:h-f*a.r,x1:h+f*a.r,y:p,text:x.join("<br>"),name:d.hovertemplate||-1!==u.indexOf("name")?d.name:void 0,idealAlign:e.pxmid[0]<0?"left":"right",color:m.castOption(b.bgcolor,e.pts)||e.color,borderColor:m.castOption(b.bordercolor,e.pts),fontFamily:m.castOption(_.family,e.pts),fontSize:m.castOption(_.size,e.pts),fontColor:m.castOption(_.color,e.pts),nameLength:m.castOption(b.namelength,e.pts),textAlign:m.castOption(b.align,e.pts),hovertemplate:m.castOption(d.hovertemplate,e.pts),hovertemplateLabels:e,eventData:[g(e,d)]},{container:r._hoverlayer.node(),outerContainer:r._paper.node(),gd:t}),o._hasHoverLabel=!0}o._hasHoverEvent=!0,t.emit("plotly_hover",{points:[g(e,d)],event:n.event})}}),e.on("mouseout",function(e){var r=t._fullLayout,a=t._fullData[o.index],l=n.select(this).datum();o._hasHoverEvent&&(e.originalEvent=n.event,t.emit("plotly_unhover",{points:[g(l,a)],event:n.event}),o._hasHoverEvent=!1),o._hasHoverLabel&&(i.loneUnhover(r._hoverlayer.node()),o._hasHoverLabel=!1)}),e.on("click",function(e){var r=t._fullLayout,a=t._fullData[o.index];t._dragging||!1===r.hovermode||(t._hoverdata=[g(e,a)],i.click(t,n.event))})}function b(e,t,r){var n=m.castOption(e.insidetextfont.color,t.pts);!n&&e._input.textfont&&(n=m.castOption(e._input.textfont.color,t.pts));var a=m.castOption(e.insidetextfont.family,t.pts)||m.castOption(e.textfont.family,t.pts)||r.family,i=m.castOption(e.insidetextfont.size,t.pts)||m.castOption(e.textfont.size,t.pts)||r.size;return{color:n||o.contrast(t.color),family:a,size:i}}function _(e,t){for(var r,n,a=0;a<e.length;a++)if((n=(r=e[a][0]).trace).title.text){var i=n.title.text;n._meta&&(i=s.templateString(i,n._meta));var o=l.tester.append("text").attr("data-notex",1).text(i).call(l.font,n.title.font).call(u.convertToTspans,t),c=l.bBox(o.node(),!0);r.titleBox={width:c.width,height:c.height},o.remove()}}function T(e,t,r){var n=r.r||t.rpx1,a=t.rInscribed;if(t.startangle===t.stopangle)return{rCenter:1-a,scale:0,rotate:0,textPosAngle:0};var i,o=t.ring,l=1===o&&Math.abs(t.startangle-t.stopangle)===2*Math.PI,s=t.halfangle,c=t.midangle,d=r.trace.insidetextorientation,u="horizontal"===d,f="tangential"===d,h="radial"===d,p="auto"===d,v=[];if(!p){var m,g=function(r,a){if(function(e,t){var r=e.startangle,n=e.stopangle;return r>t&&t>n||r<t&&t<n}(t,r)){var l=Math.abs(r-t.startangle),s=Math.abs(r-t.stopangle),c=l<s?l:s;(i="tan"===a?w(e,n,o,c,0):L(e,n,o,c,Math.PI/2)).textPosAngle=r,v.push(i)}};if(u||f){for(m=4;m>=-4;m-=2)g(Math.PI*m,"tan");for(m=4;m>=-4;m-=2)g(Math.PI*(m+1),"tan")}if(u||h){for(m=4;m>=-4;m-=2)g(Math.PI*(m+1.5),"rad");for(m=4;m>=-4;m-=2)g(Math.PI*(m+.5),"rad")}}if(l||p||u){var x=Math.sqrt(e.width*e.width+e.height*e.height);if((i={scale:a*n*2/x,rCenter:1-a,rotate:0}).textPosAngle=(t.startangle+t.stopangle)/2,i.scale>=1)return i;v.push(i)}(p||h)&&((i=L(e,n,o,s,c)).textPosAngle=(t.startangle+t.stopangle)/2,v.push(i)),(p||f)&&((i=w(e,n,o,s,c)).textPosAngle=(t.startangle+t.stopangle)/2,v.push(i));for(var y=0,b=0,_=0;_<v.length;_++){var T=v[_].scale;if(b<T&&(b=T,y=_),!p&&b>=1)break}return v[y]}function L(e,t,r,n,a){t=Math.max(0,t-2*v);var i=e.width/e.height,o=A(i,n,t,r);return{scale:2*o/e.height,rCenter:k(i,o/t),rotate:M(a)}}function w(e,t,r,n,a){t=Math.max(0,t-2*v);var i=e.height/e.width,o=A(i,n,t,r);return{scale:2*o/e.width,rCenter:k(i,o/t),rotate:M(a+Math.PI/2)}}function k(e,t){return Math.cos(t)-e*t}function M(e){return(180/Math.PI*e+720)%180-90}function A(e,t,r,n){var a=e+1/(2*Math.tan(t));return r*Math.min(1/(Math.sqrt(a*a+.5)+a),n/(Math.sqrt(e*e+n/2)+e))}function O(e,t){return e.v!==t.vTotal||t.trace.hole?Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2):1}function H(e,t){var r=t.pxmid[0],n=t.pxmid[1],a=e.width/2,i=e.height/2;return r<0&&(a*=-1),n<0&&(i*=-1),{scale:1,rCenter:1,rotate:0,x:a+Math.abs(i)*(a>0?1:-1)/2,y:i/(1+r*r/(n*n)),outside:!0}}function z(e,t){var r,n,a,i=e.trace,o={x:e.cx,y:e.cy},l={tx:0,ty:0};l.ty+=i.title.font.size,a=P(i),-1!==i.title.position.indexOf("top")?(o.y-=(1+a)*e.r,l.ty-=e.titleBox.height):-1!==i.title.position.indexOf("bottom")&&(o.y+=(1+a)*e.r);var s,c,d=(s=e.r,c=e.trace.aspectratio,s/(void 0===c?1:c)),u=t.w*(i.domain.x[1]-i.domain.x[0])/2;return-1!==i.title.position.indexOf("left")?(u+=d,o.x-=(1+a)*d,l.tx+=e.titleBox.width/2):-1!==i.title.position.indexOf("center")?u*=2:-1!==i.title.position.indexOf("right")&&(u+=d,o.x+=(1+a)*d,l.tx-=e.titleBox.width/2),r=u/e.titleBox.width,n=E(e,t)/e.titleBox.height,{x:o.x,y:o.y,scale:Math.min(r,n),tx:l.tx,ty:l.ty}}function E(e,t){var r=e.trace,n=t.h*(r.domain.y[1]-r.domain.y[0]);return Math.min(e.titleBox.height,n/2)}function P(e){var t,r=e.pull;if(!r)return 0;if(Array.isArray(r))for(r=0,t=0;t<e.pull.length;t++)e.pull[t]>r&&(r=e.pull[t]);return r}function S(e,t){for(var r=[],n=0;n<e.length;n++){var a=e[n][0],i=a.trace,o=i.domain,l=t.w*(o.x[1]-o.x[0]),s=t.h*(o.y[1]-o.y[0]);i.title.text&&"middle center"!==i.title.position&&(s-=E(a,t));var c=l/2,d=s/2;"funnelarea"!==i.type||i.scalegroup||(d/=i.aspectratio),a.r=Math.min(c,d)/(1+P(i)),a.cx=t.l+t.w*(i.domain.x[1]+i.domain.x[0])/2,a.cy=t.t+t.h*(1-i.domain.y[0])-s/2,i.title.text&&-1!==i.title.position.indexOf("bottom")&&(a.cy-=E(a,t)),i.scalegroup&&-1===r.indexOf(i.scalegroup)&&r.push(i.scalegroup)}!function(e,t){for(var r,n,a,i=0;i<t.length;i++){var o=1/0,l=t[i];for(n=0;n<e.length;n++)if(r=e[n][0],(a=r.trace).scalegroup===l){var s;if("pie"===a.type)s=r.r*r.r;else if("funnelarea"===a.type){var c,d;a.aspectratio>1?(c=r.r,d=c/a.aspectratio):(d=r.r,c=d*a.aspectratio),c*=(1+a.baseratio)/2,s=c*d}o=Math.min(o,s/r.vTotal)}for(n=0;n<e.length;n++)if(r=e[n][0],(a=r.trace).scalegroup===l){var u=o*r.vTotal;"funnelarea"===a.type&&(u/=(1+a.baseratio)/2,u/=a.aspectratio),r.r=Math.sqrt(u)}}}(e,r)}function D(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}function C(e,t,r){var n=e._fullLayout,a=r.trace,i=a.texttemplate,o=a.textinfo;if(!i&&o&&"none"!==o){var l,c=o.split("+"),d=function(e){return-1!==c.indexOf(e)},u=d("label"),f=d("text"),h=d("value"),p=d("percent"),v=n.separators;if(l=u?[t.label]:[],f){var g=m.getFirstFilled(a.text,t.pts);x(g)&&l.push(g)}h&&l.push(m.formatPieValue(t.v,v)),p&&l.push(m.formatPiePercent(t.v/r.vTotal,v)),t.text=l.join("<br>")}if(i){var y=s.castOption(a,t.i,"texttemplate");if(y){var b=function(e){return{label:e.label,value:e.v,valueLabel:m.formatPieValue(e.v,n.separators),percent:e.v/r.vTotal,percentLabel:m.formatPiePercent(e.v/r.vTotal,n.separators),color:e.color,text:e.text,customdata:s.castOption(a,e.i,"customdata")}}(t),_=m.getFirstFilled(a.text,t.pts);(x(_)||""===_)&&(b.text=_),t.text=s.texttemplateString(y,b,e._fullLayout._d3locale,b,a._meta||{})}else t.text=""}}function I(e,t){var r=e.rotate*Math.PI/180,n=Math.cos(r),a=Math.sin(r),i=(t.left+t.right)/2,o=(t.top+t.bottom)/2;e.textX=i*n-o*a,e.textY=i*a+o*n,e.noCenter=!0}e.exports={plot:function(e,t){var r=e._fullLayout,i=r._size;p("pie",r),_(t,e),S(t,i);var f=s.makeTraceGroups(r._pielayer,t,"trace").each(function(t){var f=n.select(this),p=t[0],v=p.trace;!function(e){var t,r,n,a=e[0],i=a.r,o=a.trace,l=m.getRotationAngle(o.rotation),s=2*Math.PI/a.vTotal,c="px0",d="px1";if("counterclockwise"===o.direction){for(t=0;t<e.length&&e[t].hidden;t++);if(t===e.length)return;l+=s*e[t].v,s*=-1,c="px1",d="px0"}for(n=D(i,l),t=0;t<e.length;t++)(r=e[t]).hidden||(r[c]=n,r.startangle=l,l+=s*r.v/2,r.pxmid=D(i,l),r.midangle=l,l+=s*r.v/2,n=D(i,l),r.stopangle=l,r[d]=n,r.largeArc=r.v>a.vTotal/2?1:0,r.halfangle=Math.PI*Math.min(r.v/a.vTotal,.5),r.ring=1-o.hole,r.rInscribed=O(r,a))}(t),f.attr("stroke-linejoin","round"),f.each(function(){var g=n.select(this).selectAll("g.slice").data(t);g.enter().append("g").classed("slice",!0),g.exit().remove();var x=[[[],[]],[[],[]]],_=!1;g.each(function(a,i){if(a.hidden)n.select(this).selectAll("path,g").remove();else{a.pointNumber=a.i,a.curveNumber=v.index,x[a.pxmid[1]<0?0:1][a.pxmid[0]<0?0:1].push(a);var o=p.cx,c=p.cy,d=n.select(this),f=d.selectAll("path.surface").data([a]);if(f.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),d.call(y,e,t),v.pull){var g=+m.castOption(v.pull,a.pts)||0;g>0&&(o+=g*a.pxmid[0],c+=g*a.pxmid[1])}a.cxFinal=o,a.cyFinal=c;var L=v.hole;if(a.v===p.vTotal){var w="M"+(o+a.px0[0])+","+(c+a.px0[1])+z(a.px0,a.pxmid,!0,1)+z(a.pxmid,a.px0,!0,1)+"Z";L?f.attr("d","M"+(o+L*a.px0[0])+","+(c+L*a.px0[1])+z(a.px0,a.pxmid,!1,L)+z(a.pxmid,a.px0,!1,L)+"Z"+w):f.attr("d",w)}else{var k=z(a.px0,a.px1,!0,1);if(L){var M=1-L;f.attr("d","M"+(o+L*a.px1[0])+","+(c+L*a.px1[1])+z(a.px1,a.px0,!1,L)+"l"+M*a.px0[0]+","+M*a.px0[1]+k+"Z")}else f.attr("d","M"+o+","+c+"l"+a.px0[0]+","+a.px0[1]+k+"Z")}C(e,a,p);var A=m.castOption(v.textposition,a.pts),O=d.selectAll("g.slicetext").data(a.text&&"none"!==A?[0]:[]);O.enter().append("g").classed("slicetext",!0),O.exit().remove(),O.each(function(){var d=s.ensureSingle(n.select(this),"text","",function(e){e.attr("data-notex",1)}),f=s.ensureUniformFontSize(e,"outside"===A?function(e,t,r){var n=m.castOption(e.outsidetextfont.color,t.pts)||m.castOption(e.textfont.color,t.pts)||r.color,a=m.castOption(e.outsidetextfont.family,t.pts)||m.castOption(e.textfont.family,t.pts)||r.family,i=m.castOption(e.outsidetextfont.size,t.pts)||m.castOption(e.textfont.size,t.pts)||r.size;return{color:n,family:a,size:i}}(v,a,r.font):b(v,a,r.font));d.text(a.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(l.font,f).call(u.convertToTspans,e);var g,x=l.bBox(d.node());if("outside"===A)g=H(x,a);else if(g=T(x,a,p),"auto"===A&&g.scale<1){var y=s.ensureUniformFontSize(e,v.outsidetextfont);d.call(l.font,y),g=H(x=l.bBox(d.node()),a)}var L=g.textPosAngle,w=void 0===L?a.pxmid:D(p.r,L);if(g.targetX=o+w[0]*g.rCenter+(g.x||0),g.targetY=c+w[1]*g.rCenter+(g.y||0),I(g,x),g.outside){var k=g.targetY;a.yLabelMin=k-x.height/2,a.yLabelMid=k,a.yLabelMax=k+x.height/2,a.labelExtraX=0,a.labelExtraY=0,_=!0}g.fontSize=f.size,h(v.type,g,r),t[i].transform=g,d.attr("transform",s.getTextTransform(g))})}function z(e,t,r,n){var i=n*(t[0]-e[0]),o=n*(t[1]-e[1]);return"a"+n*p.r+","+n*p.r+" 0 "+a.largeArc+(r?" 1 ":" 0 ")+i+","+o}});var L=n.select(this).selectAll("g.titletext").data(v.title.text?[0]:[]);if(L.enter().append("g").classed("titletext",!0),L.exit().remove(),L.each(function(){var t,r=s.ensureSingle(n.select(this),"text","",function(e){e.attr("data-notex",1)}),a=v.title.text;v._meta&&(a=s.templateString(a,v._meta)),r.text(a).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(l.font,v.title.font).call(u.convertToTspans,e),t="middle center"===v.title.position?function(e){var t=Math.sqrt(e.titleBox.width*e.titleBox.width+e.titleBox.height*e.titleBox.height);return{x:e.cx,y:e.cy,scale:e.trace.hole*e.r*2/t,tx:0,ty:-e.titleBox.height/2+e.trace.title.font.size}}(p):z(p,i),r.attr("transform",d(t.x,t.y)+c(Math.min(1,t.scale))+d(t.tx,t.ty))}),_&&function(e,t){var r,n,a,i,o,l,s,c,d,u,f,h,p;function v(e,t){return e.pxmid[1]-t.pxmid[1]}function g(e,t){return t.pxmid[1]-e.pxmid[1]}function x(e,r){r||(r={});var a,c,d,f,h,p,v=r.labelExtraY+(n?r.yLabelMax:r.yLabelMin),g=n?e.yLabelMin:e.yLabelMax,x=n?e.yLabelMax:e.yLabelMin,y=e.cyFinal+o(e.px0[1],e.px1[1]),b=v-g;if(b*s>0&&(e.labelExtraY=b),Array.isArray(t.pull))for(c=0;c<u.length;c++)(d=u[c])===e||(m.castOption(t.pull,e.pts)||0)>=(m.castOption(t.pull,d.pts)||0)||((e.pxmid[1]-d.pxmid[1])*s>0?(f=d.cyFinal+o(d.px0[1],d.px1[1]),(b=f-g-e.labelExtraY)*s>0&&(e.labelExtraY+=b)):(x+e.labelExtraY-y)*s>0&&(a=3*l*Math.abs(c-u.indexOf(e)),h=d.cxFinal+i(d.px0[0],d.px1[0]),(p=h+a-(e.cxFinal+e.pxmid[0])-e.labelExtraX)*l>0&&(e.labelExtraX+=p)))}for(n=0;n<2;n++)for(a=n?v:g,o=n?Math.max:Math.min,s=n?1:-1,r=0;r<2;r++){for(i=r?Math.max:Math.min,l=r?1:-1,(c=e[n][r]).sort(a),d=e[1-n][r],u=d.concat(c),h=[],f=0;f<c.length;f++)void 0!==c[f].yLabelMid&&h.push(c[f]);for(p=!1,f=0;n&&f<d.length;f++)if(void 0!==d[f].yLabelMid){p=d[f];break}for(f=0;f<h.length;f++){var y=f&&h[f-1];p&&!f&&(y=p),x(h[f],y)}}}(x,v),function(e,t){e.each(function(e){var r=n.select(this);if(e.labelExtraX||e.labelExtraY){var a=r.select("g.slicetext text");e.transform.targetX+=e.labelExtraX,e.transform.targetY+=e.labelExtraY,a.attr("transform",s.getTextTransform(e.transform));var i=e.cxFinal+e.pxmid[0],l=e.cyFinal+e.pxmid[1],c="M"+i+","+l,d=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4;if(e.labelExtraX){var u=e.labelExtraX*e.pxmid[1]/e.pxmid[0],f=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]);Math.abs(u)>Math.abs(f)?c+="l"+f*e.pxmid[0]/e.pxmid[1]+","+f+"H"+(i+e.labelExtraX+d):c+="l"+e.labelExtraX+","+u+"v"+(f-u)+"h"+d}else c+="V"+(e.yLabelMid+e.labelExtraY)+"h"+d;s.ensureSingle(r,"path","textline").call(o.stroke,t.outsidetextfont.color).attr({"stroke-width":Math.min(2,t.outsidetextfont.size/8),d:c,fill:"none"})}else r.select("path.textline").remove()})}(g,v),_&&v.automargin){var w=l.bBox(f.node()),k=v.domain,M=i.w*(k.x[1]-k.x[0]),A=i.h*(k.y[1]-k.y[0]),O=(.5*M-p.r)/i.w,E=(.5*A-p.r)/i.h;a.autoMargin(e,"pie."+v.uid+".automargin",{xl:k.x[0]-O,xr:k.x[1]+O,yb:k.y[0]-E,yt:k.y[1]+E,l:Math.max(p.cx-p.r-w.left,0),r:Math.max(w.right-(p.cx+p.r),0),b:Math.max(w.bottom-(p.cy+p.r),0),t:Math.max(p.cy-p.r-w.top,0),pad:5})}})});setTimeout(function(){f.selectAll("tspan").each(function(){var e=n.select(this);e.attr("dy")&&e.attr("dy",e.attr("dy"))})},0)},formatSliceLabel:C,transformInsideText:T,determineInsideTextFont:b,positionTitleOutside:z,prerenderTitles:_,layoutAreas:S,attachFxHandlers:y,computeTransform:I}},584:function(e,t,r){"use strict";var n=r(100).appendArrayMultiPointValues;e.exports=function(e,t){var r={curveNumber:t.index,pointNumbers:e.pts,data:t._input,fullData:t,label:e.label,color:e.color,value:e.v,percent:e.percent,text:e.text,v:e.v};return 1===e.pts.length&&(r.pointNumber=r.i=e.pts[0]),n(r,t,e.pts),"funnelarea"===t.type&&(delete r.v,delete r.i),r}},585:function(e,t,r){"use strict";var n=r(4),a=r(353),i=r(420).resizeText;e.exports=function(e){var t=e._fullLayout._pielayer.selectAll(".trace");i(e,t,"pie"),t.each(function(e){var t=e[0].trace,r=n.select(this);r.style({opacity:t.opacity}),r.selectAll("path.surface").each(function(e){n.select(this).call(a,e,t)})})}},586:function(e,t,r){"use strict";var n=r(57);t.name="pie",t.plot=function(e,r,a,i){n.plotBasePlot(t.name,e,r,a,i)},t.clean=function(e,r,a,i){n.cleanBasePlot(t.name,e,r,a,i)}}});